<HellsJanitor>
	<!-- *** remove player level health & stamina bonuses -->
	<remove xpath="/buffs/buff[@name='buffStatusCheck01']/effect_group/passive_effect[@name='HealthMax' and @value='@$PlayerLevelBonus']"/>
	<remove xpath="/buffs/buff[@name='buffStatusCheck01']/effect_group/passive_effect[@name='StaminaMax' and @value='@$PlayerLevelBonus']"/>
	
	<append xpath="/buffs/buff[@name='buffStatusCheck01']">
		<!-- Wellness checks -->
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="wellness" operation="set" value="40"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffCriticalInjuryDetector"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWellnessMaxStats"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDeathDetector"/>
		</effect_group>
		
		<!-- food smell -->
		<triggered_effect trigger="onSelfEnteredGame" action="AddBuff" target="self" buff="buffAddHeatTrigger"/>
		<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" target="self" buff="buffAddHeatTrigger"/>
		<triggered_effect trigger="onSelfRespawn" action="AddBuff" target="self" buff="buffAddHeatTrigger"/>
		
		<!-- Weather Survival HOT -->
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddOrRemoveBuff" buff="buffElementHot">
				<requirement name="!HasBuff" buff="god"/>
				<requirement name="CVarCompare" cvar="_biomeprog" operation="EQ" value="0"/>
				<requirement name="CVarCompare" cvar="_coretemp" operation="GT" value="10"/>
				<requirement name="CVarCompare" cvar="_coretemp" operation="LT" value="40"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddOrRemoveBuff" buff="buffElementSweltering">
				<requirement name="CVarCompare" cvar="_biomeprog" operation="EQ" value="0"/>
				<requirement name="!HasBuff" buff="god"/>
				<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="LT" value="3"/>
				<requirement name="CVarCompare" cvar="_coretemp" operation="GTE" value="40"/>
			</triggered_effect>

			<!-- Weather Survival COLD -->
			<triggered_effect trigger="onSelfBuffUpdate" action="AddOrRemoveBuff" buff="buffElementCold">
				<requirement name="CVarCompare" cvar="_biomeprog" operation="EQ" value="0"/>
				<requirement name="!HasBuff" buff="god"/>
				<requirement name="CVarCompare" cvar="_coretemp" operation="LT" value="-10"/>
				<requirement name="CVarCompare" cvar="_coretemp" operation="GT" value="-30"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddOrRemoveBuff" buff="buffElementFreezing">
				<requirement name="CVarCompare" cvar="_biomeprog" operation="EQ" value="0"/>
				<requirement name="!HasBuff" buff="god"/>
				<requirement name="CVarCompare" cvar="_coretemp" operation="LTE" value="-30"/>
				<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="LT" value="3"/>
			</triggered_effect>

			<!-- Weather Survival WETNESS -->
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffElementWet">
				<!-- <requirement name="CVarCompare" cvar="_biomeprog" operation="EQ" value="0"/> -->
				<requirement name="CVarCompare" cvar="_wetnessrate" operation="GT" value=".15"/>
			</triggered_effect>
		</effect_group>
		
		<!-- remove all "light" buffs on entering game -->
		<effect_group>
			<triggered_effect trigger="onSelfEnteredGame" action="RemoveBuff" buff="buffHeldLight"/>
			<triggered_effect trigger="onSelfEnteredGame" action="RemoveBuff" buff="buffHelmetLight"/>
			<triggered_effect trigger="onSelfEnteredGame" action="RemoveBuff" buff="buffHeldTorch"/>
			<triggered_effect trigger="onSelfEnteredGame" action="RemoveBuff" buff="buffGunFlashlight"/>
			<triggered_effect trigger="onSelfEnteredGame" action="RemoveBuff" buff="buffNightVision"/>
			<triggered_effect trigger="onSelfEnteredGame" action="RemoveBuff" buff="buffBurningShaft"/>
			<triggered_effect trigger="onSelfEnteredGame" action="RemoveBuff" buff="buffWallTorch"/>
		</effect_group>
		
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDespairMain"/>
			<triggered_effect trigger="onSelfEnteredGame" action="AddBuff" buff="buffDespairMain"/>
			<triggered_effect trigger="onSelfRespawn" action="AddBuff" buff="buffDespairMain"/>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffDespairMain"/>
				
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDespairCounter"/>
			<triggered_effect trigger="onSelfEnteredGame" action="AddBuff" buff="buffDespairCounter"/>
			<triggered_effect trigger="onSelfRespawn" action="AddBuff" buff="buffDespairCounter"/>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffDespairCounter"/>
		</effect_group>
			
		<!-- damage modifier for missed headshots -->
		<effect_group>
			<requirement name="HitLocation" body_parts="Torso,LeftUpperArm,RightUpperArm,LeftLowerArm,RightLowerArm,LeftUpperLeg,RightUpperLeg,LeftLowerLeg,RightLowerLeg"/>
			<requirement name="EntityTagCompare" target="other" tags="walker,feral,radiated,hazmat,mutated,mutant"/>
			<requirement name="IsAlive" target="other" tags="walker,feral,radiated,hazmat,mutated,mutant"/>
			<passive_effect name="DamageModifier" operation="perc_add" value="-.90"/>
		</effect_group>
		<effect_group>
			<requirement name="HitLocation" body_parts="Head"/>
			<requirement name="EntityTagCompare" target="other" tags="walker,feral,radiated,hazmat,mutated,mutant"/>
			<requirement name="IsAlive" target="other" tags="walker,feral,radiated,hazmat,mutated,mutant"/>
			<passive_effect name="DamageModifier" operation="perc_add" value=".1"/>
		</effect_group>
			
		<!-- initialise meds resistance cvars -->
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" target="self" action="ModifyCVar" cvar="lithiumrescount" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffStart" target="self" action="ModifyCVar" cvar="wortrescount" operation="set" value="0"/>
		</effect_group>
		<effect_group>
			<triggered_effect trigger="onSelfPlaceBlock" target="self" action="ModifyCVar" cvar="testingcvar" operation="add" value="1"/>
		</effect_group>
		
		<!-- 'zero set' sanity check for researchPoints cvar -->
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="researchPoints" operation="set" value="0"/>
			<requirement name="CVarCompare" cvar="researchPoints" operation="LTE" value="0"/>
		</effect_group>
	</append>
	
	<set xpath="/buffs/buff[@name='buffIsOnFire']/effect_group[1]/requirements/requirement[@name='RandomRoll']/@value">@_wetnessrate</set>
	
	<append xpath="/buffs/buff[@name='buffCoffee']">
		<effect_group>
			<requirement name="CVarCompare" cvar="_biomeprog" operation="EQ" value="0"/>
			<passive_effect name="HypothermalResist" operation="base_add" value="5"/>
		</effect_group>
	</append>
	
	<append xpath="/buffs/buff[@name='buffBlackStrapCoffee']">
		<effect_group>
			<requirement name="CVarCompare" cvar="_biomeprog" operation="EQ" value="0"/>
			<passive_effect name="HypothermalResist" operation="base_add" value="10"/>
		</effect_group>
	</append>
	
	<append xpath="/buffs/buff[@name='buffYuccaJuiceSmoothie']">
		<effect_group>
			<requirement name="CVarCompare" cvar="_biomeprog" operation="EQ" value="0"/>
			<passive_effect name="HyperthermalResist" operation="base_add" value="40"/>
		</effect_group>
	</append>
	
	<!-- *** modify despair tick based on buffs/debuffs -->
	<append xpath="//buff[@name='buffInfection01Untreated']">
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value=".5"/>
			<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
			<requirement name="HasBuff" buff="buffInfection01Untreated"/>
		</effect_group>
	</append>
	
	<append xpath="//buff[@name='buffInfection02Untreated']">
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="1"/>
			<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
			<requirement name="HasBuff" buff="buffInfection02Untreated"/>
		</effect_group>
	</append>
	
	<append xpath="//buff[@name='buffInfection03Untreated']">
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="1.5"/>
			<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
			<requirement name="HasBuff" buff="buffInfection03Untreated"/>
		</effect_group>
	</append>
	<append xpath="//buff[@name='buffInjuryAbrasion']">
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value=".5"/>
			<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
			<requirement name="HasBuff" buff="buffInjuryAbrasion"/>
		</effect_group>
	</append>
	
	<append xpath="//buff[@name='buffLegBroken']">
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="1.5"/>
			<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
			<requirement name="HasBuff" buff="buffLegBroken"/>
		</effect_group>
	</append>
	
	<append xpath="//buff[@name='buffArmBroken']">
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="1.5"/>
			<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
			<requirement name="HasBuff" buff="buffArmBroken"/>
		</effect_group>
	</append>
	
	<append xpath="//buff[@name='buffInjuryConcussion']">
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="1.5"/>
			<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
			<requirement name="HasBuff" buff="buffInjuryConcussion"/>
		</effect_group>
	</append>
	
	<append xpath="//buff[@name='buffLaceration']">
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="1.5"/>
			<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
			<requirement name="HasBuff" buff="buffLaceration"/>
		</effect_group>
	</append>
	
	<append xpath="//buff[@name='buffFatigued']">
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="1.5"/>
			<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
			<requirement name="HasBuff" buff="buffFatigued"/>
		</effect_group>
	</append>
	
	<append xpath="//buff[@name='buffStatusHungry01']">
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value=".5"/>
			<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
			<requirement name="HasBuff" buff="buffStatusHungry01"/>
		</effect_group>
	</append>
	
	<append xpath="//buff[@name='buffStatusThirsty01']">
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value=".5"/>
			<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
			<requirement name="HasBuff" buff="buffStatusThirsty01"/>
		</effect_group>
	</append>
	
	<append xpath="//buff[@name='buffStatusHungry02']">
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="1"/>
			<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
			<requirement name="HasBuff" buff="buffStatusHungry02"/>
		</effect_group>
	</append>
	
	<append xpath="//buff[@name='buffStatusThirsty02']">
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="1"/>
			<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
			<requirement name="HasBuff" buff="buffStatusThirsty02"/>
		</effect_group>
	</append>
	
	<append xpath="//buff[@name='buffStatusHungry03']">
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="2"/>
			<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
			<requirement name="HasBuff" buff="buffStatusHungry03"/>
		</effect_group>
	</append>
	
	<append xpath="//buff[@name='buffStatusThirsty03']">
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="2"/>
			<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
			<requirement name="HasBuff" buff="buffStatusThirsty03"/>
		</effect_group>
	</append>
	
	<!-- *** modify despair based on Charismatic Nature perk level -->
	<append xpath="//buff[@name='buffPerkCharismaticNature']//effect_group[1]">
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.05"/>
			<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
		</effect_group>
	</append>
	
	<append xpath="//buff[@name='buffPerkCharismaticNature']//effect_group[2]">
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.05"/>
			<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
		</effect_group>
	</append>
	
	<append xpath="//buff[@name='buffPerkCharismaticNature']//effect_group[3]">
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.1"/>
			<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
		</effect_group>
	</append>
	
	<append xpath="//buff[@name='buffPerkCharismaticNature']//effect_group[4]">
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.1"/>
			<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
		</effect_group>
	</append>
	
	<append xpath="//buff[@name='buffPerkCharismaticNature']//effect_group[5]">
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.2"/>
			<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
		</effect_group>
	</append>
	
	<!-- *** removes bleed particle from undead -->
	<set xpath="//buff[@name='buffInjuryBleedingParticle']">
		<duration value="0"/>

		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="AttachParticleEffectToEntity" particle="p_impact_metal_on_organic" local_offset="0,.25,0" parent_transform="LOD0">
				<requirement name="!EntityTagCompare" tags="zombie"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".buffInjuryBleedingParticleTimer" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffInjuryBleedingParticleTimer" operation="add" value="1"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="AttachParticleEffectToEntity" particle="p_impact_metal_on_organic" local_offset="0,.25,0" parent_transform="LOD0">
				<requirement name="CVarCompare" cvar=".buffInjuryBleedingParticleTimer" operation="GTE" value="4"/>
				<requirement name="!EntityTagCompare" tags="zombie"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffInjuryBleedingParticleTimer" operation="set" value="0">
				<requirement name="CVarCompare" cvar=".buffInjuryBleedingParticleTimer" operation="GTE" value="4"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffInjuryBleedingParticle">
				<requirement name="!HasBuff" buff="buffInjuryBleeding"/>
				<requirement name="!HasBuff" buff="buffInjuryBleedingOne"/>
				<requirement name="!HasBuff" buff="buffInjuryBleedingTwo"/>
				<requirement name="!HasBuff" buff="buffInjuryBleedingBarbedWire"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".buffInjuryBleedingParticleTimer" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveParticleEffectFromEntity" particle="p_impact_metal_on_organic"/>
			<triggered_effect trigger="onSelfDied" action="RemoveParticleEffectFromEntity" particle="p_impact_metal_on_organic"/>
		</effect_group>
	</set>
	
	<!-- *** add/remove healthloss to hungry buff(s) -->
	<append xpath="/buffs/buff[@name='buffStatusHungry02']/effect_group[1]">
		<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffInjuryStarvation"/>
	</append>
	
	<append xpath="/buffs/buff[@name='buffStatusHungry03']/effect_group">
		<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffInjuryStarvationOne"/>
	</append>
	
	<!-- *** hazmat zombies immune to fire damage -->
	<append xpath="//buff[@name='buffBurningMolotov']">
		<!-- if entity is hazmat, no burning -->
		<effect_group>
			<passive_effect name="HealthChangeOT" operation="base_set" duration="0,8,14,18" value="0,0,0,0">
				<requirement name="EntityTagCompare" tags="hazmat"/>
			</passive_effect>
		</effect_group>
	</append>
	
	<append xpath="//buff[@name='buffHazardBurningElement']">
		<!-- if entity is hazmat, no burning -->
		<effect_group>
			<requirement name="EntityTagCompare" tags="hazmat"/>
			<!-- Start burning cycle -->
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffIsOnFire"/>
			<!-- No health loss -->
			<passive_effect name="HealthChangeOT" operation="base_set" value="0"/>
		</effect_group>
	</append>
	
	<!-- *** remove bleed from the undead -->
	<insertafter xpath="//buff[@name='buffInjuryBleeding']/effect_group//passive_effect[@name='HealthChangeOT']">
		<requirement name="!EntityTagCompare" tags="zombie"/>
	</insertafter>
	
	<!-- *** modify bufflegcast and bufflegsplinted to look for lbu progression -->
	<set xpath="/buffs/buff[@name='buffLegSplinted']">
		<duration value="0"/>
		<display_value value=".legHurtDurationDisplay"/>
		<display_value_format value="time"/>
		
		<!-- Set the base healing rate using the physician progression of the instigator of the heal -->
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$legTreatedCritHealingBase" operation="set" value="1">
				<requirement name="ProgressionLevel" progression_name="lbu_Physician" operation="LT" value="10" target="instigator"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$legTreatedCritHealingBase" operation="set" value="1.15">
				<requirement name="ProgressionLevel" progression_name="lbu_Physician" operation="GTE" value="10" target="instigator"/>
				<requirement name="ProgressionLevel" progression_name="lbu_Physician" operation="LT" value="20" target="instigator"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$legTreatedCritHealingBase" operation="set" value="1.25">
				<requirement name="ProgressionLevel" progression_name="lbu_Physician" operation="GTE" value="20" target="instigator"/>
				<requirement name="ProgressionLevel" progression_name="lbu_Physician" operation="LT" value="40" target="instigator"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$legTreatedCritHealingBase" operation="set" value="1.5">
				<requirement name="ProgressionLevel" progression_name="lbu_Physician" operation="GTE" value="40" target="instigator"/></triggered_effect>
		</effect_group>
		
		<!-- Add treatedCritHealingBonuses to legTreatedCritHealing. Then use the greater of legTreatedCritHealing and treatedCritHealing. -->
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legTreatedCritHealing" operation="set" value="@$legTreatedCritHealingBase"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legTreatedCritHealing" operation="add" value="@$treatedCritHealingBonuses"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legTreatedCritHealing" operation="set" value="@$treatedCritHealing">
				<requirement name="CVarCompare" cvar="$treatedCritHealing" operation="GT" value="@$legTreatedCritHealing"/></triggered_effect>
		</effect_group>
		
		<effect_group>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveCVar" cvar="$legTreatedCritHealingBase,$legTreatedCritHealing,.legTotalHealingRate"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveCVar" cvar="$legHurtCounter,.LegHurtHealthBlockage">
				<requirement name="!HasBuff" buff="buffLegBroken"/>
				<requirement name="ProgressionLevel" progression_name="lbu_Physician" operation="GTE" value="40" target="instigator"/>
			</triggered_effect>
		</effect_group>

		<effect_group>
			<!-- Handlers for other leg buffs -->
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffBrokenLimbStatus"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffLegBroken"/>
			<!-- Start/Update total healing -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".legTotalHealingRate" operation="set" value="@$critHitNaturalHealingRate"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".legTotalHealingRate" operation="add" value="2"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".legTotalHealingRate" operation="multiply" value="@$legTreatedCritHealing"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".legTotalHealingRate" operation="divide" value="@$minerHealing">
				<requirement name="CVarCompare" cvar="$minerCheck" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legTotalHealingRate" operation="set" value="@$critHitNaturalHealingRate"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legTotalHealingRate" operation="add" value="2"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legTotalHealingRate" operation="multiply" value="@$legTreatedCritHealing"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legTotalHealingRate" operation="divide" value="@$minerHealing">
				<requirement name="CVarCompare" cvar="$minerCheck" operation="GT" value="0"/>
			</triggered_effect>
			<!-- If not running, decrease counter by rate -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legHurtCounter" operation="subtract" value="@.legTotalHealingRate">
				<requirement name="!EntityHasMovementTag" tags="running"/></triggered_effect>
		</effect_group>

		<effect_group name="activity makes damaged legs worse">
			<requirement name="!HasBuff" buff="buffDrugSteroids"/>
			<!-- Jumping makes it worse -->
			<triggered_effect trigger="onSelfJump" action="ModifyStats" stat="Health" operation="subtract" value="1"/>
			<triggered_effect trigger="onSelfJump" action="ModifyCVar" cvar="$legHurtCounter" operation="add" value="12"/>
			<triggered_effect trigger="onSelfJump" action="AddBuff" buff="buffLegGetsWorse"/>
			<!-- Falling makes it worse -->
			<triggered_effect trigger="onSelfFallImpact" action="ModifyCVar" cvar="$legHurtCounter" operation="add" value="12">
				<requirement name="CVarCompare" cvar="_fallSpeed" operation="GTE" value=".07"/></triggered_effect>
			<triggered_effect trigger="onSelfFallImpact" action="AddBuff" buff="buffLegGetsWorse">
				<requirement name="CVarCompare" cvar="_fallSpeed" operation="GTE" value=".07"/></triggered_effect>
			<!-- If running, make it worse -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legHurtCounter" operation="add" value="2">
				<requirement name="EntityHasMovementTag" tags="running"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffLegGetsWorse">
				<requirement name="EntityHasMovementTag" tags="running"/></triggered_effect>
			<!-- Clamp counter -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legHurtCounter" operation="set" value="7208">
				<requirement name="CVarCompare" cvar="$legHurtCounter" operation="GT" value="7208"/>
			</triggered_effect>
		</effect_group>

		<effect_group name="DisplayDuration">
			<!-- Handlers for the display -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legHurtDurationDisplay" operation="set" value="@$legHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legHurtDurationDisplay" operation="divide" value="@.legTotalHealingRate"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveCVar" cvar=".legHurtDurationDisplay"/>
		</effect_group>

		<effect_group>
			<requirement name="CVarCompare" cvar=".legHurtDurationDisplay" operation="LTE" value="0"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveCVar" cvar="$legHurtCounter"/>
		</effect_group>

		<effect_group>
			<!-- If counter LTE 0, reset counters, health blockage, and remove buff -->
			<requirement name="CVarCompare" cvar="$legHurtCounter" operation="LTE" value="0"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveCVar" cvar="$legHurtCounter,.legTotalHealingRate,.LegHurtHealthBlockage"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffLegSplinted"/>
		</effect_group>

		<effect_group>
			<!-- Setup the max health blockage based on the remaining counter -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="set" value="@$legHurtCounter"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="divide" value="360"/><!-- 20 @ 120m -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="set" value="@$legHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="divide" value="360"/><!-- 20 @ 120m -->
			<passive_effect name="HealthMaxBlockage" operation="base_add" value="@.LegHurtHealthBlockage"/>
			<!-- Slow movement and reduce jump strength -->
			<passive_effect name="Mobility" operation="base_add" value="-.15"/>
			<passive_effect name="JumpStrength" operation="perc_subtract" value="0.06"/>
		</effect_group>
	</set>
	
	<set xpath="/buffs/buff[@name='buffLegCast']">
		<duration value="0"/>
		<display_value value=".legHurtDurationDisplay"/>
		<display_value_format value="time"/>
		
		<!-- Set the base healing rate using the physician progression of the instigator of the heal -->
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$legTreatedCritHealingBase" operation="set" value="1">
				<requirement name="ProgressionLevel" progression_name="lbu_Physician" operation="LT" value="10" target="instigator"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$legTreatedCritHealingBase" operation="set" value="1.15">
				<requirement name="ProgressionLevel" progression_name="lbu_Physician" operation="GTE" value="10" target="instigator"/>
				<requirement name="ProgressionLevel" progression_name="lbu_Physician" operation="LT" value="20" target="instigator"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$legTreatedCritHealingBase" operation="set" value="1.25">
				<requirement name="ProgressionLevel" progression_name="lbu_Physician" operation="GTE" value="20" target="instigator"/>
				<requirement name="ProgressionLevel" progression_name="lbu_Physician" operation="LT" value="40" target="instigator"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$legTreatedCritHealingBase" operation="set" value="1.5">
				<requirement name="ProgressionLevel" progression_name="lbu_Physician" operation="GTE" value="40" target="instigator"/></triggered_effect>
		</effect_group>
		
		<!-- Add treatedCritHealingBonuses to legTreatedCritHealing. Then use the greater of legTreatedCritHealing and treatedCritHealing. -->
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legTreatedCritHealing" operation="set" value="@$legTreatedCritHealingBase"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legTreatedCritHealing" operation="add" value="@$treatedCritHealingBonuses"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legTreatedCritHealing" operation="set" value="@$treatedCritHealing">
				<requirement name="CVarCompare" cvar="$treatedCritHealing" operation="GT" value="@$legTreatedCritHealing"/></triggered_effect>
		</effect_group>
		
		<effect_group>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveCVar" cvar="$legTreatedCritHealingBase,$legTreatedCritHealing,$legHurtCounter,.LegHurtHealthBlockage,.legTotalHealingRate">
				<requirement name="!HasBuff" buff="buffLegBroken"/></triggered_effect>
		</effect_group>
		
		<effect_group>
			<!-- Handlers for other leg buffs -->
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffLegBroken"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffLegSplinted"/>
			<!-- Start/Update total healing -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".legTotalHealingRate" operation="set" value="@$critHitNaturalHealingRate"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".legTotalHealingRate" operation="add" value="3.7"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".legTotalHealingRate" operation="multiply" value="@$legTreatedCritHealing"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".legTotalHealingRate" operation="divide" value="@$minerHealing">
				<requirement name="CVarCompare" cvar="$minerCheck" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legTotalHealingRate" operation="set" value="@$critHitNaturalHealingRate"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legTotalHealingRate" operation="add" value="3.7"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legTotalHealingRate" operation="multiply" value="@$legTreatedCritHealing"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legTotalHealingRate" operation="divide" value="@$minerHealing">
				<requirement name="CVarCompare" cvar="$minerCheck" operation="GT" value="0"/>
			</triggered_effect>
			<!-- If not running, decrease counter by rate -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legHurtCounter" operation="subtract" value="@.legTotalHealingRate">
				<requirement name="!EntityHasMovementTag" tags="running"/></triggered_effect>
		</effect_group>

		<effect_group name="DisplayDuration">
			<!-- Handlers for the display -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legHurtDurationDisplay" operation="set" value="@$legHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legHurtDurationDisplay" operation="divide" value="@.legTotalHealingRate"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveCVar" cvar=".legHurtDurationDisplay"/>
		</effect_group>

		<effect_group name="activity makes damaged legs worse">
			<!-- If not consuming steroids... -->
			<requirement name="!HasBuff" buff="buffDrugSteroids"/>
			<!-- Jumping makes it worse -->
			<triggered_effect trigger="onSelfJump" action="ModifyStats" stat="Health" operation="subtract" value="1"/>
			<triggered_effect trigger="onSelfJump" action="ModifyCVar" cvar="$legHurtCounter" operation="add" value="12"/>
			<triggered_effect trigger="onSelfJump" action="AddBuff" buff="buffLegGetsWorse"/>
			<!-- Falling makes it worse -->
			<triggered_effect trigger="onSelfFallImpact" action="ModifyCVar" cvar="$legHurtCounter" operation="add" value="12">
				<requirement name="CVarCompare" cvar="_fallSpeed" operation="GTE" value=".07"/></triggered_effect>
			<triggered_effect trigger="onSelfFallImpact" action="AddBuff" buff="buffLegGetsWorse">
				<requirement name="CVarCompare" cvar="_fallSpeed" operation="GTE" value=".07"/></triggered_effect>
			<!-- If running, make it worse -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legHurtCounter" operation="add" value="2">
				<requirement name="EntityHasMovementTag" tags="running"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffLegGetsWorse">
				<requirement name="EntityHasMovementTag" tags="running"/></triggered_effect>
			<!-- Clamp counter -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legHurtCounter" operation="set" value="7208">
				<requirement name="CVarCompare" cvar="$legHurtCounter" operation="GT" value="7208"/>
			</triggered_effect>
		</effect_group>
		
		<effect_group>
			<requirement name="CVarCompare" cvar=".legHurtDurationDisplay" operation="LTE" value="0"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveCVar" cvar="$legHurtCounter"/>
		</effect_group>

		<effect_group>
			<!-- If counter LTE 0, reset counters, health blockage, and remove buff -->
			<requirement name="CVarCompare" cvar="$legHurtCounter" operation="LTE" value="0"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveCVar" cvar="$legHurtCounter,.legTotalHealingRate,.LegHurtHealthBlockage"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffLegCast"/>
		</effect_group>

		<effect_group>
			<!-- Setup the max health blockage based on the remaining counter -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="set" value="@$legHurtCounter"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="divide" value="480"/><!-- 15 @ 120m -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="set" value="@$legHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="divide" value="480"/><!-- 15 @ 120m -->
			<passive_effect name="HealthMaxBlockage" operation="base_add" value="@.LegHurtHealthBlockage"/>
			<!-- Slow movement and reduce jump strength -->
			<passive_effect name="Mobility" operation="base_add" value="-.1"/>
			<passive_effect name="JumpStrength" operation="perc_subtract" value="0.09"/>
		</effect_group>
	</set>
	
	<set xpath="/buffs/buff[@name='buffArmSprained']">
		<damage_type value="sprain"/>
		<stack_type value="replace"/>
		<duration value="0"/>
		<display_value value=".armHurtDurationDisplay"/>
		<display_value_format value="time"/>

		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffBrokenLimbStatus"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffBrokenLimbStatus"/>
			<!-- Blinks the display -->
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffArmSprained"/>
			<!-- Setup and start a cool down -->
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffLimbSprainedCooldown"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".limbSprainedCooldownCounter" operation="set" value="12"/>
			<!-- Play sound -->
			<triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="player#painsm"/>
			<!-- Set counter -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$armHurtCounter" operation="set" value="605"/>
			<!-- Restart counter -->
			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="$armHurtCounter" operation="set" value="605">
				<requirement name="CVarCompare" cvar="$armHurtCounter" operation="LT" value="605"/>
			</triggered_effect>
			<!-- Reduce counter by natural healing rate -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$armHurtCounter" operation="subtract" value="@$critHitNaturalHealingRate"/>
			<!-- Reset -->
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveCVar" cvar="$armHurtCounter,.ArmHurtHealthBlockage">
				<requirement name="ProgressionLevel" progression_name="lbu_Physician" operation="GTE" value="10"/>
				<requirement name="!HasBuff" buff="buffArmBroken"/>
			</triggered_effect>
		</effect_group>

		<effect_group name="DisplayDuration">
			<!-- Handlers for the display -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armHurtDurationDisplay" operation="set" value="@$armHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armHurtDurationDisplay" operation="divide" value="@$critHitNaturalHealingRate"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveCVar" cvar=".armHurtDurationDisplay"/>
		</effect_group>

		<effect_group name="activity makes damaged arms worse">
			<!-- If not consuming steroids... -->
			<requirement name="!HasBuff" buff="buffDrugSteroids"/>
			<!-- Using ranged makes it worse -->
			<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="$armHurtCounter" operation="add" value="4">
				<requirement name="HoldingItemHasTags" tags="ranged"/></triggered_effect>
			<triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" buff="buffArmGetsWorse">
				<requirement name="HoldingItemHasTags" tags="ranged"/></triggered_effect>
			<!-- Using melee makes it worse -->
			<triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyStats" stat="Health" operation="subtract" value="1">
				<requirement name="HoldingItemHasTags" tags="melee"/>
				<requirement name="!HoldingItemHasTags" tags="repairTool"/></triggered_effect>
			<triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar="$armHurtCounter" operation="add" value="4">
				<requirement name="HoldingItemHasTags" tags="melee"/>
				<requirement name="!HoldingItemHasTags" tags="repairTool"/></triggered_effect>
			<triggered_effect trigger="onSelfSecondaryActionEnd" action="AddBuff" buff="buffArmGetsWorse">
				<requirement name="HoldingItemHasTags" tags="melee"/>
				<requirement name="!HoldingItemHasTags" tags="repairTool"/></triggered_effect>
			<!-- Clamp counter -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$armHurtCounter" operation="set" value="605">
				<requirement name="CVarCompare" cvar="$armHurtCounter" operation="GT" value="605"/>
			</triggered_effect>
		</effect_group>

		<effect_group>
			<!-- If counter LTE 0, reset counter, health blockage, and remove buff -->
			<requirement name="CVarCompare" cvar="$armHurtCounter" operation="LTE" value="0"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveCVar" cvar="$armHurtCounter,.ArmHurtHealthBlockage"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffArmSprained"/>
		</effect_group>

		<effect_group>
			<!-- Setup the max health blockage based on the remaining counter -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="set" value="@$armHurtCounter"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="divide" value="40"/><!-- 15 @ 10m -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="set" value="@$armHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="divide" value="40"/><!-- 15 @ 10m -->
			<passive_effect name="HealthMaxBlockage" operation="base_add" value="@.ArmHurtHealthBlockage"/>
			<!-- Reduce weapon actions -->
			<passive_effect name="WeaponHandling" operation="perc_add" value="-.15" tags="perkGunslinger,perkBoomstick,perkDeadEye,perkMachineGunner,perkBookAutoWeapons,perkTurrets,perkArchery,admin"/>
			<passive_effect name="ReloadSpeedMultiplier" operation="perc_add" value="-.2" tags="perkGunslinger,perkBoomstick,perkDeadEye,perkMachineGunner,perkBookAutoWeapons,perkTurrets,perkArchery,admin"/>
			<passive_effect name="AttacksPerMinute" operation="perc_add" value="-.15" tags="perkMiner69r,perkSalvageOperations,perkElectrocutioner,perkJavelinMaster,perkPummelPete,perkSkullCrusher,perkDeepCuts,perkBrawler,admin"/>
		</effect_group>
	</set>
	
	<set xpath="/buffs/buff[@name='buffArmBroken']">
		<damage_type value="break"/>
		<stack_type value="replace"/>
		<duration value="0"/>
		<display_value value=".armHurtDurationDisplay"/>
		<display_value_format value="time"/>

		<effect_group>
			<!-- Blinks the display -->
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffArmBroken"/>
			<!-- Handlers for other arm buffs -->
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffBrokenLimbStatus"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffArmSplinted"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffArmCast"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffArmSprained"/>
			<!-- Setup or stack counters -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$armHurtCounter" operation="set" value="7208">
				<requirement name="CVarCompare" cvar="$armHurtCounter" operation="LT" value="7208"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="$armHurtCounter" operation="set" value="7208">
				<requirement name="CVarCompare" cvar="$armHurtCounter" operation="LT" value="7208"/>
			</triggered_effect>
			<!-- Reduce counter by natural healing rate -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$armHurtCounter" operation="subtract" value="@$critHitNaturalHealingRate"/>
			<!-- Reset -->
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveCVar" cvar="$armHurtCounter,.ArmHurtHealthBlockage">
				<requirement name="HoldingItemHasTags" tags="cast"/>
				<requirement name="ProgressionLevel" progression_name="lbu_Physician" operation="GTE" value="40"/>
			</triggered_effect>
		</effect_group>

		<effect_group name="DisplayDuration">
			<!-- Handlers for the display -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armHurtDurationDisplay" operation="set" value="@$armHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armHurtDurationDisplay" operation="divide" value="@$critHitNaturalHealingRate"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveCVar" cvar=".armHurtDurationDisplay"/>
		</effect_group>

		<effect_group name="activity makes damaged arms worse">
			<!-- If not consuming steroids... -->
			<requirement name="!HasBuff" buff="buffDrugSteroids"/>
			<!-- Using ranged makes it worse -->
			<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="$armHurtCounter" operation="add" value="4">
				<requirement name="HoldingItemHasTags" tags="ranged"/></triggered_effect>
			<triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" buff="buffArmGetsWorse">
				<requirement name="HoldingItemHasTags" tags="ranged"/></triggered_effect>
			<!-- Using melee makes it worse -->
			<triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyStats" stat="Health" operation="subtract" value="1">
				<requirement name="HoldingItemHasTags" tags="melee"/>
				<requirement name="!HoldingItemHasTags" tags="repairTool,heldTorch"/></triggered_effect>
			<triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar="$armHurtCounter" operation="add" value="4">
				<requirement name="HoldingItemHasTags" tags="melee"/>
				<requirement name="!HoldingItemHasTags" tags="repairTool,heldTorch"/></triggered_effect>
			<triggered_effect trigger="onSelfSecondaryActionEnd" action="AddBuff" buff="buffArmGetsWorse">
				<requirement name="HoldingItemHasTags" tags="melee"/>
				<requirement name="!HoldingItemHasTags" tags="repairTool,heldTorch"/></triggered_effect>
			<!-- Clamp counter -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$armHurtCounter" operation="set" value="7208">
				<requirement name="CVarCompare" cvar="$armHurtCounter" operation="GT" value="7208"/>
			</triggered_effect>
		</effect_group>

		<effect_group>
			<!-- If counter LTE 0, reset counter, health blockage, and remove buff -->
			<requirement name="CVarCompare" cvar="$armHurtCounter" operation="LTE" value="0"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveCVar" cvar="$armHurtCounter,.ArmHurtHealthBlockage"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffArmBroken"/>
		</effect_group>

		<effect_group>
			<!-- Setup the max health blockage based on the remaining counter -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="set" value="@$armHurtCounter"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="divide" value="240"/><!-- 30 @ 120m -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="set" value="@$armHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="divide" value="240"/><!-- 30 @ 120m -->
			<passive_effect name="HealthMaxBlockage" operation="base_add" value="@.ArmHurtHealthBlockage"/>
			<!-- Reduce weapon actions -->
			<passive_effect name="WeaponHandling" operation="perc_add" value="-.25" tags="perkGunslinger,perkBoomstick,perkDeadEye,perkMachineGunner,perkBookAutoWeapons,perkTurrets,perkArchery,admin"/>
			<passive_effect name="ReloadSpeedMultiplier" operation="perc_add" value="-.35" tags="perkGunslinger,perkBoomstick,perkDeadEye,perkMachineGunner,perkBookAutoWeapons,perkTurrets,perkArchery,admin"/>
			<passive_effect name="AttacksPerMinute" operation="perc_add" value="-.25" tags="perkMiner69r,perkSalvageOperations,perkElectrocutioner,perkJavelinMaster,perkPummelPete,perkSkullCrusher,perkDeepCuts,perkBrawler,admin"/>
		</effect_group>
	</set>
	
	<!-- *** Bar Brawler 5 moonshine changes -->
	<remove xpath="/buffs/buff[@name='buffDrunkGrandpasMoonshine']/effect_group/triggered_effect[@effect_name='Drunk']"/>
	<append xpath="/buffs/buff[@name='buffDrunkGrandpasMoonshine']">
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="1" fade="4" effect_name="Drunk">
				<requirement name="ProgressionLevel" progression_name="perkBarBrawling5AdrenalineHealing" operation="Equals" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" intensity="0" fade="4" effect_name="Drunk">
				<requirement name="ProgressionLevel" progression_name="perkBarBrawling5AdrenalineHealing" operation="Equals" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" intensity="0" effect_name="Drunk"/>
		</effect_group>
	</append>
	
	<append xpath="/buffs">
		<!-- *** buffCampfireAOEEffect -->
		<!-- TRIGGERED_BY: Buffs = buffCampfireAOE -->
		<!-- Grants an insulation buff -->
		<buff name="buffCampfireAOEEffect" name_key="buffCampfireAOEEffectName" description_key="buffCampfireAOEEffectDesc" icon="ui_game_symbol_campfire">
			<stack_type value="replace"/>
			<duration value="2"/>

			<effect_group>
				<requirement name="CVarCompare" cvar="_biomeprog" operation="EQ" value="0"/>
				<passive_effect name="HypothermalResist" operation="base_add" value="15"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.1"/>
				<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
				<requirement name="!HasBuff" buff="buffGoodCompanyFromTrader"/>
				<requirement name="HasBuff" buff="buffCampfireAOEEffect"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffCampfireAOEEffect">
					<requirement name="HasBuff" buff="buffGoodCompanyFromTrader"/>
				</triggered_effect>
			</effect_group>
		</buff>
		
		<!-- *** buffElementHot -->
		<!-- TRIGGERED_BY: Buffs = buffStatusCheck01 -->
		<!-- Being hot decreases water over time -->
		<buff name="buffElementHot" name_key="buffElementHotName" description_key="buffElementHotDesc" tooltip_key="buffElementHotTooltip" icon="ui_game_symbol_hot" icon_color="255,128,0">
			<damage_type value="heat"/>
			<stack_type value="ignore"/>

			<effect_group>
				<!-- Blinks the display -->
				<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffElementHot"/>
				<!-- Increase water loss when regenerating stamina -->
				<passive_effect name="WaterLossPerStaminaPointGained" operation="perc_add" value="3"/>
				<passive_effect name="WaterLossPerStaminaPointGained" operation="perc_add" value="-.15">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="1"/></passive_effect>
				<passive_effect name="WaterLossPerStaminaPointGained" operation="perc_add" value="-.3">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="2"/></passive_effect>
				<passive_effect name="WaterLossPerStaminaPointGained" operation="perc_add" value="-.45">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="3"/></passive_effect>
				<passive_effect name="WaterLossPerStaminaPointGained" operation="perc_add" value="-.6">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="GTE" value="4"/></passive_effect>
				<!-- Handler for screen effects -->
				<!-- <triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="1" fade="3" effect_name="Hot"/> -->
				<!-- <triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" intensity="0" fade="3" effect_name="Hot"/> -->
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="1" fade="3" effect_name="Hot2"/>

				<triggered_effect trigger="onSelfBuffUpdate" action="PlaySound" sound="player#hot">
					<requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="5"/>
					<requirement name="!EntityHasMovementTag" tags="running"/>
					<requirement name="!HasBuff" buff="god"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="PlaySound" sound="player#hot">
					<requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="15"/>
					<requirement name="EntityHasMovementTag" tags="running"/>
					<requirement name="!HasBuff" buff="god"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" intensity="0" fade="3" effect_name="Hot2"/>
			</effect_group>
		</buff>

		<!-- *** buffElementSweltering -->
		<!-- TRIGGERED_BY: Buffs = buffStatusCheck01 -->
		<!-- Sweltering decreases food water faster than hot -->
		<buff name="buffElementSweltering" name_key="buffElementSwelteringName" description_key="buffElementSwelteringDesc" tooltip_key="buffElementSwelteringTooltip" icon="ui_game_symbol_hot" icon_color="255,0,0" icon_blink="true">
			<damage_type value="heat"/>
			<stack_type value="ignore"/>

			<effect_group>
				<!-- Blinks the display -->
				<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffElementSweltering"/>
				<!-- Remove hot buff -->
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffElementHot"/>
				<!-- Increase water loss when regenerating stamina more than buffElementHot -->
				<passive_effect name="WaterLossPerStaminaPointGained" operation="perc_add" value="6"/>
				<passive_effect name="WaterLossPerStaminaPointGained" operation="perc_add" value="-.45">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="1"/></passive_effect>
				<passive_effect name="WaterLossPerStaminaPointGained" operation="perc_add" value="-.9">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="2"/></passive_effect>
				<passive_effect name="WaterLossPerStaminaPointGained" operation="perc_add" value="-1.35">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="3"/></passive_effect>
				<passive_effect name="WaterLossPerStaminaPointGained" operation="perc_add" value="-1.8">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="GTE" value="4"/></passive_effect>
					
				<!-- Handler for screen effects -->
				<!-- <triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="1" fade="3" effect_name="Hot2"/> -->
				<!-- <triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" intensity="0" fade="3" effect_name="Hot2"/> -->
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="1" fade="3" effect_name="Hot2"/>

				<triggered_effect trigger="onSelfBuffUpdate" action="PlaySound" sound="player#hot">
					<requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="5"/>
					<requirement name="!EntityHasMovementTag" tags="running"/>
					<requirement name="!HasBuff" buff="god"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="PlaySound" sound="player#hot">
					<requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="15"/>
					<requirement name="EntityHasMovementTag" tags="running"/>
					<requirement name="!HasBuff" buff="god"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" intensity="0" fade="3" effect_name="Hot2"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="10"/>
				<requirement name="HasBuff" buff="buffElementSweltering"/>
			</effect_group>
		</buff>
		
		<buff name="buffElementSwelteringOnHit" name_key="buffElementSwelteringName" description_key="buffElementSwelteringDesc" tooltip_key="buffElementSwelteringTooltip" icon="ui_game_symbol_hot" icon_color="204,85,0" icon_blink="true">
			<damage_type value="heat"/>
			<stack_type value="replace"/>
			<duration value="7"/>

			<effect_group>
				<!-- Blinks the display -->
				<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffElementSweltering"/>
				<!-- Remove hot buff -->
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffElementHot"/>
				<!-- Increase water loss when regenerating stamina more than buffElementHot -->
				<passive_effect name="WaterLossPerStaminaPointGained" operation="perc_add" value="6"/>
				<passive_effect name="WaterLossPerStaminaPointGained" operation="perc_add" value="-.45">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="1"/></passive_effect>
				<passive_effect name="WaterLossPerStaminaPointGained" operation="perc_add" value="-.9">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="2"/></passive_effect>
				<passive_effect name="WaterLossPerStaminaPointGained" operation="perc_add" value="-1.35">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="3"/></passive_effect>
				<passive_effect name="WaterLossPerStaminaPointGained" operation="perc_add" value="-1.8">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="GTE" value="4"/></passive_effect>
					
				<!-- Handler for screen effects -->
				<!-- <triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="1" fade="3" effect_name="Hot2"/> -->
				<!-- <triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" intensity="0" fade="3" effect_name="Hot2"/> -->
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="1" fade="3" effect_name="Hot2"/>

				<triggered_effect trigger="onSelfBuffUpdate" action="PlaySound" sound="player#hot">
					<requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="5"/>
					<requirement name="!EntityHasMovementTag" tags="running"/>
					<requirement name="!HasBuff" buff="god"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="PlaySound" sound="player#hot">
					<requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="15"/>
					<requirement name="EntityHasMovementTag" tags="running"/>
					<requirement name="!HasBuff" buff="god"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" intensity="0" fade="3" effect_name="Hot2"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="10"/>
				<requirement name="HasBuff" buff="buffElementSweltering"/>
			</effect_group>
		</buff>

		<!-- *** buffElementCold -->
		<!-- TRIGGERED_BY: Buffs = buffStatusCheck01 -->
		<!-- Being cold decreases food over time -->
		<buff name="buffElementCold" name_key="buffElementColdName" description_key="buffElementColdDesc" tooltip_key="buffElementColdTooltip" icon="ui_game_symbol_cold" icon_color="255,128,0">
			<damage_type value="cold"/>
			<stack_type value="ignore"/>

			<effect_group>
				<!-- Blinks the display -->
				<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffElementCold"/>
				<!-- Decrease food over time -->
				<passive_effect name="FoodChangeOT" operation="perc_add" value=".3"/>
				<passive_effect name="FoodChangeOT" operation="perc_add" value="-.045">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="1"/></passive_effect>
				<passive_effect name="FoodChangeOT" operation="perc_add" value="-.09">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="GTE" value="2"/></passive_effect>
				<!-- Consume food faster when regenerating stamina -->
				<passive_effect name="FoodLossPerStaminaPointGained" operation="perc_add" value="1"/>
				<passive_effect name="FoodLossPerStaminaPointGained" operation="perc_add" value="-.15">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="1"/></passive_effect>
				<passive_effect name="FoodLossPerStaminaPointGained" operation="perc_add" value="-.3">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="2"/></passive_effect>
				<passive_effect name="FoodLossPerStaminaPointGained" operation="perc_add" value="-.45">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="3"/></passive_effect>
				<passive_effect name="FoodLossPerStaminaPointGained" operation="perc_add" value="-.6">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="GTE" value="4"/></passive_effect>
				<!-- Handler for screen effects -->
				<triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="1" fade="3" effect_name="Cold"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" intensity="0" fade="3" effect_name="Cold"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="AttachParticleEffectToEntity" particle="p_weatherEffects_freezingBreath" local_rotation="90,0,0" sound="player#cold" parent_transform="Camera">
					<requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="5"/>
					<requirement name="!EntityHasMovementTag" tags="running"/>
					<requirement name="!HasBuff" buff="god"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="AttachParticleEffectToEntity" particle="p_weatherEffects_freezingBreath" local_rotation="90,0,0" sound="player#cold" parent_transform="Camera">
					<requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="15"/>
					<requirement name="EntityHasMovementTag" tags="running"/>
					<requirement name="!HasBuff" buff="god"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffRemove" action="RemoveParticleEffectFromEntity" particle="p_weatherEffects_freezingBreath"/>
			</effect_group>
		</buff>

		<!-- *** buffElementFreezing -->
		<!-- TRIGGERED_BY: Buffs = buffStatusCheck01 -->
		<!-- Freezing decreases food faster than cold -->
		<buff name="buffElementFreezing" name_key="buffElementFreezingName" description_key="buffElementFreezingDesc" tooltip_key="buffElementFreezingTooltip" icon="ui_game_symbol_cold" icon_color="255,0,0" icon_blink="true">
			<damage_type value="cold"/>
			<stack_type value="ignore"/>

			<effect_group>
				<!-- Blinks the display -->
				<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffElementFreezing"/>
				<!-- Remove cold buff -->
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffElementCold"/>
				<!-- Decrease food faster over time compared to buffElementCold -->
				<passive_effect name="FoodChangeOT" operation="perc_add" value=".6"/>
				<passive_effect name="FoodChangeOT" operation="perc_add" value="-.045">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="1"/></passive_effect>
				<passive_effect name="FoodChangeOT" operation="perc_add" value="-.09">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="2"/></passive_effect>
				<passive_effect name="FoodChangeOT" operation="perc_add" value="-.135">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="3"/></passive_effect>
				<passive_effect name="FoodChangeOT" operation="perc_add" value="-.18">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="GTE" value="4"/></passive_effect>
				<!-- Consume food faster when regenerating stamina compared to buffElementCold -->
				<passive_effect name="FoodLossPerStaminaPointGained" operation="perc_add" value="2"/>
				<passive_effect name="FoodLossPerStaminaPointGained" operation="perc_add" value="-.15">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="1"/></passive_effect>
				<passive_effect name="FoodLossPerStaminaPointGained" operation="perc_add" value="-.3">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="2"/></passive_effect>
				<passive_effect name="FoodLossPerStaminaPointGained" operation="perc_add" value="-.45">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="3"/></passive_effect>
				<passive_effect name="FoodLossPerStaminaPointGained" operation="perc_add" value="-.6">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="GTE" value="4"/></passive_effect>
				<!-- Handler for screen effects -->
				<triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="1" fade="3" effect_name="Cold2"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" intensity="0" fade="3" effect_name="Cold2"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="AttachParticleEffectToEntity" particle="p_weatherEffects_freezingBreath" local_rotation="90,0,0" sound="player#cold" parent_transform="Camera">
					<requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="5"/>
					<requirement name="!EntityHasMovementTag" tags="running"/>
					<requirement name="!HasBuff" buff="god"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="AttachParticleEffectToEntity" particle="p_weatherEffects_freezingBreath" local_rotation="90,0,0" sound="player#cold" parent_transform="Camera">
					<requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="15"/>
					<requirement name="EntityHasMovementTag" tags="running"/>
					<requirement name="!HasBuff" buff="god"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffRemove" action="RemoveParticleEffectFromEntity" particle="p_weatherEffects_freezingBreath"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="10"/>
				<requirement name="HasBuff" buff="buffElementFreezing"/>
			</effect_group>
		</buff>
		
		<buff name="buffElementFreezingOnHit" name_key="buffElementFreezingName" description_key="buffElementFreezingDesc" tooltip_key="buffElementFreezingTooltip" icon="ui_game_symbol_cold" icon_color="0,200,255" icon_blink="true">
			<damage_type value="cold"/>
			<stack_type value="replace"/>
			<duration value="5"/>

			<effect_group>
				<!-- Blinks the display -->
				<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffElementFreezing"/>
				<!-- Remove cold buff -->
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffElementCold"/>
				<!-- Decrease food faster over time compared to buffElementCold -->
				<passive_effect name="FoodChangeOT" operation="perc_add" value=".6"/>
				<passive_effect name="FoodChangeOT" operation="perc_add" value="-.045">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="1"/></passive_effect>
				<passive_effect name="FoodChangeOT" operation="perc_add" value="-.09">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="2"/></passive_effect>
				<passive_effect name="FoodChangeOT" operation="perc_add" value="-.135">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="3"/></passive_effect>
				<passive_effect name="FoodChangeOT" operation="perc_add" value="-.18">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="GTE" value="4"/></passive_effect>
				<!-- Consume food faster when regenerating stamina compared to buffElementCold -->
				<passive_effect name="FoodLossPerStaminaPointGained" operation="perc_add" value="2"/>
				<passive_effect name="FoodLossPerStaminaPointGained" operation="perc_add" value="-.15">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="1"/></passive_effect>
				<passive_effect name="FoodLossPerStaminaPointGained" operation="perc_add" value="-.3">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="2"/></passive_effect>
				<passive_effect name="FoodLossPerStaminaPointGained" operation="perc_add" value="-.45">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="Equals" value="3"/></passive_effect>
				<passive_effect name="FoodLossPerStaminaPointGained" operation="perc_add" value="-.6">
					<requirement name="ProgressionLevel" progression_name="perkWellInsulated" operation="GTE" value="4"/></passive_effect>
				<!-- Handler for screen effects -->
				<triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="1" fade="3" effect_name="Cold2"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" intensity="0" fade="3" effect_name="Cold2"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="AttachParticleEffectToEntity" particle="p_weatherEffects_freezingBreath" local_rotation="90,0,0" sound="player#cold" parent_transform="Camera">
					<requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="5"/>
					<requirement name="!EntityHasMovementTag" tags="running"/>
					<requirement name="!HasBuff" buff="god"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="AttachParticleEffectToEntity" particle="p_weatherEffects_freezingBreath" local_rotation="90,0,0" sound="player#cold" parent_transform="Camera">
					<requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="15"/>
					<requirement name="EntityHasMovementTag" tags="running"/>
					<requirement name="!HasBuff" buff="god"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffRemove" action="RemoveParticleEffectFromEntity" particle="p_weatherEffects_freezingBreath"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="10"/>
				<requirement name="HasBuff" buff="buffElementFreezing"/>
			</effect_group>
		</buff>

		<!-- *** buffElementWet -->
		<!-- TRIGGERED_BY: Buffs = buffStatusCheck01 -->
		<!-- Displays a percentage of wetness and adjusts thermal resistance stats -->
		<buff name="buffElementWet" name_key="buffElementWetName" description_key="buffElementWetDesc" tooltip_key="buffElementWetTooltip" icon="ui_game_symbol_wet">
			<damage_type value="cold"/>
			<stack_type value="ignore"/>
			<update_rate value="2.4"/>
			<display_value_key value="{0:0.0}%"/>
			<display_value value="$WetTempModifierDisplay"/>

			<effect_group>
				<!-- Blinks the display -->
				<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffElementWet"/>
				<!-- Setup the initial counters -->
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$WetTempModifier" operation="set" value="2"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$WetTempModifierActive" operation="set" value="2"/>
				<!-- Setup the counter to the game variable and maths -->
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$WetTempModifier" operation="set" value="@_wetnessrate"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$WetTempModifier" operation="multiply" value="16"/>
				<!-- If the updated value is GT active counter, set active counter -->
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$WetTempModifierActive" operation="set" value="@$WetTempModifier">
					<requirement name="CVarCompare" cvar="$WetTempModifier" operation="GT" value="@$WetTempModifierActive"/>
				</triggered_effect>
				<!-- Setup the display -->
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$WetTempModifierDisplay" operation="set" value="@$WetTempModifierActive"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$WetTempModifierDisplay" operation="multiply" value="6.25"/>
				<!-- Decrease the active counter -->
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$WetTempModifierActive" operation="subtract" value=".2"/>
				<!-- Adjust thermal resistance stats -->
				<passive_effect name="HypothermalResist" operation="base_subtract" value="@$WetTempModifierActive"/>
				<passive_effect name="HyperthermalResist" operation="base_add" value="@$WetTempModifierActive"/>
				<!-- If active counter is LT 1, remove buff -->
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffElementWet">
					<requirement name="CVarCompare" cvar="$WetTempModifierActive" operation="LT" value="1"/>
				</triggered_effect>
				<!-- Reset active counter -->
				<triggered_effect trigger="onSelfBuffRemove" action="RemoveCVar" cvar="$WetTempModifierActive"/>
			</effect_group>

			<effect_group>
				<!-- If holding a torch OR near a campfire/forge/chem station, decrease the active counter faster -->
				<requirements compare_type="or">
					<requirement name="HoldingItemHasTags" tags="heldTorch"/>
					<requirement name="HasBuff" buff="buffCampfireAOE"/>
				</requirements>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$WetTempModifierActive" operation="subtract" value=".4"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="2.5"/>
				<requirement name="!IsSheltered"/>
				<requirement name="CVarCompare" cvar="$WetTempModifierDisplay" operation="GTE" value="50"/>
			</effect_group>
		</buff>
		
		<!-- *** hyperthermal resist for Yucca juice -->
		<buff name="buffYuccaJuice" name_key="drinkYuccaJuice" description_key="drinkYuccaJuice" icon="ui_game_symbol_coffee">
			<stack_type value="replace"/>
			<duration value="0"/>
			<display_value value=".buffYuccaJuiceDisplay"/>
			<display_value_format value="time"/>

			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffYuccaJuiceDuration" operation="subtract" value="@$MetabolismDuration"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffYuccaJuiceDisplay" operation="set" value="@$buffYuccaJuiceDuration"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffYuccaJuiceDisplay" operation="divide" value="@$MetabolismDuration"/>
			</effect_group>

			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffYuccaJuice">
					<requirement name="CVarCompare" cvar="$buffYuccaJuiceDuration" operation="LTE" value="0"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfBuffRemove" action="RemoveCVar" cvar=".buffYuccaJuiceDisplay,$buffYuccaJuiceDuration"/>
			</effect_group>

			<effect_group>
				<passive_effect name="HyperthermalResist" operation="base_add" value="10"/>
			</effect_group>
		</buff>
		
		<!-- *** healthloss from starvation -->
		<buff name="buffInjuryStarvationOne" name_key="buffInjuryStarvationOne" icon="ui_game_symbol_critical" icon_color="255,255,0" icon_blink="true" hidden="true">
			<damage_type value="Starvation"/>
			<duration value="4"/>

			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveCVar" cvar="starveCounter">
					<!-- check for leftover counters without buff -->
					<requirement name="!HasBuff" buff="buffInjuryStarvation"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="starveCounter" operation="add" value="1.5">
					<requirement name="CVarCompare" cvar="starveCounter" operation="LT" value="1"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffInjuryStarvation">
					<!-- buff can be extended/refreshed. -->
					<requirement name="CVarCompare" cvar="starveCounter" operation="GT" value="0"/>
				</triggered_effect>
			</effect_group>
		</buff>
		
		<buff name="buffInjuryStarvation" name_key="buffInjuryStarvationName" description_key="buffInjuryStarvationDesc" tooltip_key="buffInjuryStarvationTooltip" icon="ui_game_symbol_critical" icon_color="255,0,0" icon_blink="true">
			<damage_type value="Starvation"/>
			<damage_source value="Internal"/>
			<stack_type value="replace"/>
			<duration value="0"/>
			<display_value value="$starveDuration"/>
			<display_value_format value="time"/>

			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$starveDuration" operation="set" value="@wellness"/>
				<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="$starveDuration" operation="set" value="@wellness"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$starveDuration" operation="add" value="-1"/>

				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffInjuryStarvation">
					<requirement name="CVarCompare" cvar="$starveDuration" operation="LTE" value="0"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffInjuryStarvation">
					<requirement name="CVarCompare" cvar="starveCounter" operation="Equals" value="0"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$starveAmount" operation="set" value="@starveCounter"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$starveAmount" operation="divide" value="2">
					<requirement name="ProgressionLevel" progression_name="perkSlowMetabolism" operation="Equals" value="1"/>
					<requirement name="CVarCompare" cvar="$MetabolismResist" operation="LTE" value="-3"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$starveAmount" operation="set" value="@starveCounter"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$starveAmount" operation="divide" value="2">
					<requirement name="CVarCompare" cvar="$MetabolismResist" operation="LTE" value="-3"/>
				</triggered_effect>

				<!-- <passive_effect name="HealthChangeOT" operation="base_subtract" value="@$starveAmount"/>				 -->
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyStats" stat="Health" operation="subtract" value="@$starveAmount"/>
				
				<passive_effect name="RunSpeed" operation="perc_add" value="@$starveSlowdown"/>

				<triggered_effect trigger="onSelfBuffRemove" action="RemoveCVar" cvar="starveCounter,$starveAmount,$starveSlowdown,$starveDuration"/>

				<triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="buff_stunned" play_in_head="true"/>
				<triggered_effect trigger="onSelfBuffRemove" action="StopSound" sound="buff_stunned" play_in_head="true"/>
				<triggered_effect trigger="onSelfLeaveGame" action="StopSound" sound="buff_stunned" play_in_head="true"/>
				<triggered_effect trigger="onSelfEnteredGame" action="PlaySound" sound="buff_stunned" play_in_head="true"/>
				
				<triggered_effect trigger="onSelfBuffStart" action="ShakeCamera" shake_speed="0.02" shake_amplitude="60" shake_time="10"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ShakeCamera" shake_speed="0" shake_amplitude="0" shake_time="10"/>

				<triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="0.3" fade="1" effect_name="Blur"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" intensity="0" fade="1" effect_name="Blur"/>
				<triggered_effect trigger="onSelfDied" action="ModifyScreenEffect" effect_name="Infected" intensity="0" fade="0"/>
				<triggered_effect trigger="onSelfDied" action="RemoveBuff" buff="buffInjuryStarvation"/>
			</effect_group>
		</buff>
		
		<!-- *** corpse run -->
		<buff name="buffCorpseRun" name_key="buffCorpseRunName" description_key="buffCorpseRunDesc" icon="ui_game_symbol_run" icon_blink="true" icon_color="192,192,192">
			<duration value="40"/>
			<stack_type value="effect"/>
			<display_value value="corpserun"/>
			<display_value_format value="time"/>
			<display_value_key value="{0:0.00}"/>
			<update_rate value="1"/>
	
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="corpserun" operation="set" value="40"/>
				<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="corpserun" operation="set" value="40"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="corpserun" operation="subtract" value="1"/>
			</effect_group>
			<effect_group>
				<passive_effect name="ElementalDamageResist" operation="perc_add" value=".20" tags="cold,heat,electrical"/>
				<passive_effect name="PhysicalDamageResist" operation="perc_add" value=".20"/>
				<passive_effect name="PhysicalDamageResist" operation="perc_add" value=".20" tags="coredamageresist"/>
				<passive_effect name="ElementalDamageResist" operation="perc_add" value=".20" tags="heat,electrical"/>
				<passive_effect name="StaminaChangeOT" operation="perc_add" value=".25"/>
				<passive_effect name="RunSpeed" operation="perc_add" value=".25"/>
			</effect_group>
		</buff>
		
		<!-- *** buff for random zombie walk types -->
		<buff name="buffRandomWalk" hidden="true">
			<duration value="0"/>
	
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="walktype" operation="set" value="randomint(1,27)"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="1"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="1"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="2"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="1"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="3"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="1"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="4"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="1"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="5"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="1"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="6"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="1"/>
			</effect_group>
			
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="7"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="1"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="8"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="1"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="9"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="3"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="10"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="3"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="11"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="3"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="12"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="3"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="13"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="3"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="14"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="3"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="15"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="3"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="16"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="3"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="17"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="5"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="18"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="5"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="19"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="5"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="20"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="5"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="21"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="5"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="22"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="5"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="23"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="5"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="24"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="5"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="25"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="2"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="26"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="6"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="walktype" operation="Equals" value="27"/>
				<requirement name="!EntityTagCompare" tags="player"/>
				<requirement name="EntityTagCompare" tags="walker"/>
				<triggered_effect trigger="onSelfBuffStart" action="AnimatorSetInt" property="WalkType" value="7"/>
			</effect_group>
		</buff>
		
		<!-- *** buff for helmet lights, flashlights, torches, nightvision, burning shaft etc. -->
		<buff name="buffHeldLight" hidden="true">
			<duration value="0"/>
		
			<effect_group tiered="false">
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.25"/>
				<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
				<requirement name="HasBuff" buff="buffHeldLight"/>
				<requirement name="HasBuff" buff="buffFlashLightActive"/>
			</effect_group>
		</buff>
	
		<buff name="buffHelmetLight" hidden="true">
			<duration value="0"/>
		
			<effect_group tiered="false">
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.25"/>
				<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
				<requirement name="HasBuff" buff="buffHelmetLight"/>
				<requirement name="HasBuff" buff="buffHelmetLightActive"/>
			</effect_group>
		</buff>
	
		<buff name="buffHeldTorch" hidden="true">
			<duration value="0"/>
		
			<effect_group tiered="false">
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.25"/>
				<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
				<requirement name="HasBuff" buff="buffHeldTorch"/>
				<requirement name="HasBuff" buff="buffHandTorchActive"/>
			</effect_group>
		</buff>
	
		<buff name="buffGunFlashlight" hidden="true">
			<duration value="0"/>
		
			<effect_group tiered="false">
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.25"/>
				<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
				<requirement name="HasBuff" buff="buffGunFlashlight"/>
				<requirement name="HasBuff" buff="buffWeaponLightActive"/>
			</effect_group>
		</buff>
	
		<buff name="buffNightVision" hidden="true">
			<duration value="0"/>
		</buff>
	
		<buff name="buffBurningShaft" hidden="true">
			<duration value="0"/>
		
			<effect_group tiered="false">
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.25"/>
				<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
				<requirement name="HasBuff" buff="buffBurningShaftActive"/>
			</effect_group>
		</buff>
	
		<buff name="buffWallTorch" hidden="true">
			<duration value="1"/>
		
			<effect_group tiered="false">
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.25"/>
				<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
				<requirement name="HasBuff" buff="buffWallTorch"/>
			</effect_group>
		</buff>
		
		<!-- *** Despair -->
		<buff name="buffDespairMain" name_key="buff Despair Main" hidden="true" remove_on_death="false" icon="ui_game_symbol_near_death_trauma">
			<damage_type value="Infection"/>
			<stack_type value="ignore"/>
			<duration value="0"/>
			<update_rate value="1"/>
			<tags value="deathpenalty_injured"/>

			<!-- Despair is fully %-based. DespairCounter is a float % value. Despair kills the player when it reaches 100%, and can't be removed. -->
			<effect_group>
				<!-- DespairMaxDuration defined in buffStatusCheck01 (7 hours) -->
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$DespairMaxDuration" operation="set" value="25200">
					<requirement name="CVarCompare" cvar="$DespairMaxDuration" operation="Equals" value="0"/>
				</triggered_effect>
			
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="1.5"/>

				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$DespairStage2Duration" operation="set" value="40"/><!-- % of the full buff duration -->
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$DespairStage3Duration" operation="set" value="65"/><!-- % of the full buff duration -->

				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$DespairDisplayDivisor" operation="set" value="@$DespairMaxDuration"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$DespairDisplayDivisor" operation="divide" value="100"/>
				<!-- DespairDisplayPerc = DespairCounter / DespairDisplayDivisor -->
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$DespairStage2Duration" operation="multiply" value="@$DespairDisplayDivisor"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$DespairStage3Duration" operation="multiply" value="@$DespairDisplayDivisor"/>

				<!-- cleanup -->
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="DespairCounter" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".DespairDisplayPerc" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$DespairDisplayDivisor" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$DespairCureCounter" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$DespairStage2Duration" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$DespairStage3Duration" operation="set" value="0"/>
			</effect_group>

			<!-- adjust despair tick rates based on conditional requirements -->
			<!-- Indoors at night -->
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="1.5"/>
				<requirement name="IsIndoors"/>
				<requirement name="IsNight"/>
			</effect_group>
		
			<!-- outdoors at night -->
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="10"/>
				<requirement name="!IsIndoors"/>
				<requirement name="IsNight"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="10"/>
				<requirement name="!IsIndoors"/>
				<requirement name="IsNight"/>
				<requirement name="!HasBuff" target="self" buff="buffHeldLight"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="10"/>
				<requirement name="!IsIndoors"/>
				<requirement name="IsNight"/>
				<requirement name="!HasBuff" target="self" buff="buffHeldTorch"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="10"/>
				<requirement name="!IsIndoors"/>
				<requirement name="IsNight"/>
				<requirement name="!HasBuff" target="self" buff="buffHelmetLight"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="10"/>
				<requirement name="!IsIndoors"/>
				<requirement name="IsNight"/>
				<requirement name="!HasBuff" target="self" buff="buffGunFlashlight"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="10"/>
				<requirement name="!IsIndoors"/>
				<requirement name="IsNight"/>
				<requirement name="!HasBuff" target="self" buff="buffNightVision"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="10"/>
				<requirement name="!IsIndoors"/>
				<requirement name="IsNight"/>
				<requirement name="!HasBuff" target="self" buff="buffBurningShaft"/>
			</effect_group>
		
			<!-- outdoors at night, with a light -->
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="1.75"/>
				<requirement name="!IsIndoors"/>
				<requirement name="IsNight"/>
				<requirement name="HasBuff" target="self" buff="buffHeldLight"/>
			</effect_group>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="1.75"/>
				<requirement name="!IsIndoors"/>
				<requirement name="IsNight"/>
				<requirement name="HasBuff" target="self" buff="buffHeldTorch"/>
			</effect_group>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="1.75"/>
				<requirement name="!IsIndoors"/>
				<requirement name="IsNight"/>
				<requirement name="HasBuff" target="self" buff="buffHelmetLight"/>
			</effect_group>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="1.75"/>
				<requirement name="!IsIndoors"/>
				<requirement name="IsNight"/>
				<requirement name="HasBuff" target="self" buff="buffGunFlashlight"/>
			</effect_group>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="1.75"/>
				<requirement name="!IsIndoors"/>
				<requirement name="IsNight"/>
				<requirement name="HasBuff" target="self" buff="buffNightVision"/>
			</effect_group>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="1.75"/>
				<requirement name="!IsIndoors"/>
				<requirement name="IsNight"/>
				<requirement name="HasBuff" target="self" buff="buffBurningShaft"/>
			</effect_group>
		
			<!-- Indoors, daytime -->
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="1"/>
				<requirement name="IsIndoors"/>
				<requirement name="IsDay"/>
			</effect_group>
		
			<!-- outdoors, daytime -->
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="1.25"/>
				<requirement name="!IsIndoors"/>
				<requirement name="IsDay"/>
			</effect_group>
		
			<!-- indoors, with a light source, near a campfire, not freezing or sweltering, and dry -->
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="-.5"/>
				<requirement name="IsIndoors"/>
				<requirement name="IsDay"/>
				<requirement name="!HasBuff" target="self" buff="buffDespairCureDisplay"/>
				<requirement name="HasBuff" target="self" buff="buffCampfireAOEEffect"/>
				<requirement name="HasBuff" target="self" buff="buffHeldLight"/>
			</effect_group>

			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="-.5"/>
				<requirement name="IsIndoors"/>
				<requirement name="IsDay"/>
				<requirement name="!HasBuff" target="self" buff="buffDespairCureDisplay"/>
				<requirement name="HasBuff" target="self" buff="buffHelmetLight"/>
				<requirement name="HasBuff" target="self" buff="buffCampfireAOEEffect"/>
			</effect_group>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="-.5"/>
				<requirement name="IsIndoors"/>
				<requirement name="IsDay"/>
				<requirement name="!HasBuff" target="self" buff="buffDespairCureDisplay"/>
				<requirement name="HasBuff" target="self" buff="buffHeldTorch"/>
				<requirement name="HasBuff" target="self" buff="buffCampfireAOEEffect"/>
			</effect_group>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="-.5"/>
				<requirement name="IsIndoors"/>
				<requirement name="IsDay"/>
				<requirement name="!HasBuff" target="self" buff="buffDespairCureDisplay"/>
				<requirement name="HasBuff" target="self" buff="buffGunFlashlight"/>
				<requirement name="HasBuff" target="self" buff="buffCampfireAOEEffect"/>
			</effect_group>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="-.5"/>
				<requirement name="IsIndoors"/>
				<requirement name="IsDay"/>
				<requirement name="!HasBuff" target="self" buff="buffDespairCureDisplay"/>
				<requirement name="HasBuff" target="self" buff="buffNightVision"/>
				<requirement name="HasBuff" target="self" buff="buffCampfireAOEEffect"/>
			</effect_group>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="-.5"/>
				<requirement name="IsIndoors"/>
				<requirement name="IsDay"/>
				<requirement name="!HasBuff" target="self" buff="buffDespairCureDisplay"/>
				<requirement name="HasBuff" target="self" buff="buffBurningShaft"/>
				<requirement name="HasBuff" target="self" buff="buffCampfireAOEEffect"/>
			</effect_group>
		
			<!-- <effect_group> -->
			<!-- <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="-.1"/> -->
			<!-- <requirement name="IsIndoors"/> -->
			<!-- <requirement name="IsDay"/> -->
			<!-- <requirement name="!HasBuff" target="self" buff="buffDespairCureDisplay"/> -->
			<!-- <requirement name="HasBuff" target="self" buff="buffWallTorch"/> -->
			<!-- <requirement name="HasBuff" target="self" buff="buffCampfireAOEEffect"/> -->
			<!-- </effect_group> -->
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="-.5"/>
				<requirement name="IsIndoors"/>
				<requirement name="IsNight"/>
				<requirement name="!HasBuff" target="self" buff="buffDespairCureDisplay"/>
				<requirement name="HasBuff" target="self" buff="buffHeldLight"/>
				<requirement name="HasBuff" target="self" buff="buffCampfireAOEEffect"/>
			</effect_group>

			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="-.5"/>
				<requirement name="IsIndoors"/>
				<requirement name="IsNight"/>
				<requirement name="!HasBuff" target="self" buff="buffDespairCureDisplay"/>
				<requirement name="HasBuff" target="self" buff="buffHelmetLight"/>
				<requirement name="HasBuff" target="self" buff="buffCampfireAOEEffect"/>
			</effect_group>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="-.5"/>
				<requirement name="IsIndoors"/>
				<requirement name="IsNight"/>
				<requirement name="!HasBuff" target="self" buff="buffDespairCureDisplay"/>
				<requirement name="HasBuff" target="self" buff="buffHeldTorch"/>
				<requirement name="HasBuff" target="self" buff="buffCampfireAOEEffect"/>
			</effect_group>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="-.5"/>
				<requirement name="IsIndoors"/>
				<requirement name="IsNight"/>
				<requirement name="!HasBuff" target="self" buff="buffDespairCureDisplay"/>
				<requirement name="HasBuff" target="self" buff="buffGunFlashlight"/>
				<requirement name="HasBuff" target="self" buff="buffCampfireAOEEffect"/>
			</effect_group>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="-.5"/>
				<requirement name="IsIndoors"/>
				<requirement name="IsNight"/>
				<requirement name="!HasBuff" target="self" buff="buffDespairCureDisplay"/>
				<requirement name="HasBuff" target="self" buff="buffNightVision"/>
				<requirement name="HasBuff" target="self" buff="buffCampfireAOEEffect"/>
			</effect_group>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="-.5"/>
				<requirement name="IsIndoors"/>
				<requirement name="IsNight"/>
				<requirement name="!HasBuff" target="self" buff="buffDespairCureDisplay"/>
				<requirement name="HasBuff" target="self" buff="buffBurningShaft"/>
				<requirement name="HasBuff" target="self" buff="buffCampfireAOEEffect"/>
			</effect_group>
		
			<!-- <effect_group> -->
			<!-- <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="-.1"/> -->
			<!-- <requirement name="IsIndoors"/> -->
			<!-- <requirement name="IsNight"/> -->
			<!-- <requirement name="!HasBuff" target="self" buff="buffDespairCureDisplay"/> -->
			<!-- <requirement name="HasBuff" target="self" buff="buffWallTorch"/> -->
			<!-- <requirement name="HasBuff" target="self" buff="buffCampfireAOEEffect"/> -->
			<!-- </effect_group> -->
			
			<!-- indoors, near a campfire -->
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="-.1"/>
				<requirement name="IsIndoors"/>
				<requirement name="IsDay"/>
				<requirement name="!HasBuff" target="self" buff="buffDespairCureDisplay"/>
				<requirement name="!HasBuff" target="self" buff="buffHeldTorch"/>
				<requirement name="!HasBuff" target="self" buff="buffHeldLight"/>
				<requirement name="!HasBuff" target="self" buff="buffHelmetLight"/>
				<requirement name="!HasBuff" target="self" buff="buffGunFlashlight"/>
				<requirement name="!HasBuff" target="self" buff="buffNightVision"/>
				<requirement name="!HasBuff" target="self" buff="buffBurningShaft"/>
				<requirement name="!HasBuff" target="self" buff="buffWallTorch"/>
				<requirement name="!HasBuff" target="self" buff="buffGoodCompanyFromTrader"/>
				<requirement name="HasBuff" target="self" buff="buffCampfireAOEEffect"/>
			</effect_group>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="-.5"/>
				<requirement name="IsIndoors"/>
				<requirement name="IsNight"/>
				<requirement name="!HasBuff" target="self" buff="buffDespairCureDisplay"/>
				<requirement name="!HasBuff" target="self" buff="buffHeldTorch"/>
				<requirement name="!HasBuff" target="self" buff="buffHeldLight"/>
				<requirement name="!HasBuff" target="self" buff="buffHelmetLight"/>
				<requirement name="!HasBuff" target="self" buff="buffGunFlashlight"/>
				<requirement name="!HasBuff" target="self" buff="buffNightVision"/>
				<requirement name="!HasBuff" target="self" buff="buffBurningShaft"/>
				<requirement name="!HasBuff" target="self" buff="buffWallTorch"/>
				<requirement name="!HasBuff" target="self" buff="buffGoodCompanyFromTrader"/>
				<requirement name="HasBuff" target="self" buff="buffCampfireAOEEffect"/>
				<requirement name="BlockStandingOn" tags="bedroll"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounterModifier" operation="set" value="-.15"/>
				<requirement name="IsIndoors"/>
				<requirement name="IsNight"/>
				<requirement name="!HasBuff" target="self" buff="buffDespairCureDisplay"/>
				<requirement name="!HasBuff" target="self" buff="buffHeldTorch"/>
				<requirement name="!HasBuff" target="self" buff="buffHeldLight"/>
				<requirement name="!HasBuff" target="self" buff="buffHelmetLight"/>
				<requirement name="!HasBuff" target="self" buff="buffGunFlashlight"/>
				<requirement name="!HasBuff" target="self" buff="buffNightVision"/>
				<requirement name="!HasBuff" target="self" buff="buffBurningShaft"/>
				<requirement name="!HasBuff" target="self" buff="buffWallTorch"/>
				<requirement name="!BlockStandingOn" tags="bedroll"/>
				<requirement name="HasBuff" target="self" buff="buffCampfireAOEEffect"/>
			</effect_group>
		
			<!-- buffs/cvars for UI display -->
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="warm" operation="set" value="1"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWarm"/>
				<!-- <requirement name="IsIndoors"/> -->
				<requirement name="HasBuff" target="self" buff="buffCampfireAOEEffect"/>
			</effect_group>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="warm" operation="set" value="0"/>
				<!-- <requirement name="IsIndoors"/> -->
				<requirement name="!HasBuff" target="self" buff="buffCampfireAOEEffect"/>
			</effect_group>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="shelter" operation="set" value="1"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffShelter"/>
				<requirement name="IsIndoors"/>
			</effect_group>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="shelter" operation="set" value="0"/>
				<requirement name="!IsIndoors"/>
			</effect_group>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="comfort" operation="set" value="1"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWellLit"/>
				<!-- <requirement name="IsIndoors"/>	 -->
				<requirements compare_type="or">
					<requirement name="HasBuff" target="self" buff="buffFlashLightActive"/>
					<requirement name="HasBuff" target="self" buff="buffHelmetLightActive"/>
					<requirement name="HasBuff" target="self" buff="buffHandTorchActive"/>
					<requirement name="HasBuff" target="self" buff="buffWeaponLightActive"/>
					<requirement name="HasBuff" target="self" buff="buffNVGActive"/>
					<requirement name="HasBuff" target="self" buff="buffBurningShaftActive"/>
					<requirement name="HasBuff" target="self" buff="buffWallTorch"/>
					<requirement name="HasBuff" target="self" buff="buffCampfireAOEEffect"/>
				</requirements>
			</effect_group>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="comfort" operation="set" value="0"/>
				<requirements compare_type="and">
					<requirement name="!HasBuff" target="self" buff="buffFlashLightActive"/>
					<requirement name="!HasBuff" target="self" buff="buffHelmetLightActive"/>
					<requirement name="!HasBuff" target="self" buff="buffHandTorchActive"/>
					<requirement name="!HasBuff" target="self" buff="buffWeaponLightActive"/>
					<requirement name="!HasBuff" target="self" buff="buffNVGActive"/>
					<requirement name="!HasBuff" target="self" buff="buffBurningShaftActive"/>
					<requirement name="!HasBuff" target="self" buff="buffWallTorch"/>
					<requirement name="!HasBuff" target="self" buff="buffCampfireAOEEffect"/>
				</requirements>
			</effect_group>
		
			<!-- getting hit by enemies -->
			<effect_group>
				<triggered_effect trigger="onOtherAttackedSelf" action="ModifyCVar" cvar="DespairCounter" operation="add" value="20"/>
				<triggered_effect trigger="onOtherAttackedSelf" action="AddBuff" buff="buffDespairGetsWorse"/>
				<requirement name="EntityTagCompare" target="other" tags="zombie,hostile"/>
			</effect_group>
			<!-- hitting enemies -->
			<effect_group>
				<triggered_effect trigger="onSelfDamagedOther" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-1"/>
			</effect_group>
			<!-- killing enemies -->
			<effect_group>
				<triggered_effect trigger="onSelfKilledOther" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-10"/>
			</effect_group>
			<!-- reduces tick rate if player has drone morale booster buff -->
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-1.25"/>
				<requirement name="HasBuff" buff="buffJunkDroneSupportEffect"/>
			</effect_group>
			<!-- perk From the Shadows negates effects of despair from darkness -->
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.25">
					<requirement name="ProgressionLevel" progression_name="perkFromTheShadows" operation="GTE" value="5"/>
					<requirement name="IsNight"/>
				</triggered_effect>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.2">
					<requirement name="ProgressionLevel" progression_name="perkFromTheShadows" operation="GTE" value="4"/>
					<requirement name="ProgressionLevel" progression_name="perkFromTheShadows" operation="LT" value="5"/>
					<requirement name="IsNight"/>
				</triggered_effect>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.15">
					<requirement name="ProgressionLevel" progression_name="perkFromTheShadows" operation="GTE" value="3"/>
					<requirement name="ProgressionLevel" progression_name="perkFromTheShadows" operation="LT" value="4"/>
					<requirement name="IsNight"/>
				</triggered_effect>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.1">
					<requirement name="ProgressionLevel" progression_name="perkFromTheShadows" operation="GTE" value="2"/>
					<requirement name="ProgressionLevel" progression_name="perkFromTheShadows" operation="LT" value="3"/>
					<requirement name="IsNight"/>
				</triggered_effect>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.05">
					<requirement name="ProgressionLevel" progression_name="perkFromTheShadows" operation="GTE" value="1"/>
					<requirement name="ProgressionLevel" progression_name="perkFromTheShadows" operation="LT" value="2"/>
					<requirement name="IsNight"/>
				</triggered_effect>
			</effect_group>
		
			<!-- alters tick rate for despair based on player "wellness" (health) -->
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.25">
					<requirement name="StatCompareMax" target="self" stat="health" operation="GTE" value="200"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.225">
					<requirement name="StatCompareMax" target="self" stat="health" operation="LT" value="190"/>
					<requirement name="StatCompareMax" target="self" stat="health" operation="GTE" value="180"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.2">
					<requirement name="StatCompareMax" target="self" stat="health" operation="LT" value="180"/>
					<requirement name="StatCompareMax" target="self" stat="health" operation="GTE" value="170"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.175">
					<requirement name="StatCompareMax" target="self" stat="health" operation="LT" value="170"/>
					<requirement name="StatCompareMax" target="self" stat="health" operation="GTE" value="160"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.15">
					<requirement name="StatCompareMax" target="self" stat="health" operation="LT" value="160"/>
					<requirement name="StatCompareMax" target="self" stat="health" operation="GTE" value="150"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.125">
					<requirement name="StatCompareMax" target="self" stat="health" operation="LT" value="150"/>
					<requirement name="StatCompareMax" target="self" stat="health" operation="GTE" value="140"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.1">
					<requirement name="StatCompareMax" target="self" stat="health" operation="LT" value="140"/>
					<requirement name="StatCompareMax" target="self" stat="health" operation="GTE" value="130"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.075">
					<requirement name="StatCompareMax" target="self" stat="health" operation="LT" value="130"/>
					<requirement name="StatCompareMax" target="self" stat="health" operation="GTE" value="120"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-.05">
					<requirement name="StatCompareMax" target="self" stat="health" operation="LT" value="120"/>
					<requirement name="StatCompareMax" target="self" stat="health" operation="GTE" value="110"/>
				</triggered_effect>
			</effect_group>
		
			<effect_group name="main loop">
				<!-- upward tick for despair -->
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="@DespairCounterModifier"/>
			
				<!-- downward tick for despair if cure counter is GT zero -->
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-3">
					<requirement name="CVarCompare" cvar="$DespairCureCounter" operation="GT" value="0"/>
				</triggered_effect>
			
				<!-- downward tick for cure if cure counter is GT zero -->
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$DespairCureCounter" operation="add" value="-2">
					<requirement name="CVarCompare" cvar="$DespairCureCounter" operation="GT" value="0"/>
				</triggered_effect>
			
				<!-- sets despair cure counter to zero if LT zero -->
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$DespairCureCounter" operation="set" value="0">
					<requirement name="CVarCompare" cvar="$DespairCureCounter" operation="LT" value="0"/>
				</triggered_effect>
			
				<!-- what the fuck does this do? -->
				<triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar="DespairCounterRespawn" operation="set" value="@DespairCounter"/>
			</effect_group>
		
			<effect_group name="display % values">
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".DespairDisplayPerc" operation="set" value="@DespairCounter"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".DespairDisplayPerc" operation="divide" value="@$DespairDisplayDivisor"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".DespairCureDisplayPerc" operation="set" value="@$DespairCureCounter"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".DespairCureDisplayPerc" operation="divide" value="@$DespairDisplayDivisor"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".DespairDisplayHUD" operation="set" value="@.DespairDisplayPerc"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".DespairDisplayHUD" operation="divide" value="100"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".DespairCureDisplayHUD" operation="set" value="@.DespairCureDisplayPerc"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".DespairCureDisplayHUD" operation="divide" value="100"/>
			</effect_group>

			<effect_group name="signaling buffs">
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDespairCureDisplay">
					<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
					<requirement name="!HasBuff" buff="buffDespairCureDisplayFood"/>
					<requirement name="CVarCompare" cvar="$DespairCureCounter" operation="GT" value="0"/>
				</triggered_effect>
			
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDespairCureDisplayPositive01">
					<requirement name="!HasBuff" buff="buffDespairCureDisplayPositive01"/>
					<requirement name="CVarCompare" cvar="DespairCounter" operation="LT" value="0"/>
					<requirement name="CVarCompare" cvar="DespairCounter" operation="GT" value="-8400"/>
				</triggered_effect>
				
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDespairCureDisplayPositive02">
					<requirement name="!HasBuff" buff="buffDespairCureDisplayPositive02"/>
					<requirement name="CVarCompare" cvar="DespairCounter" operation="LT" value="-8400"/>
					<requirement name="CVarCompare" cvar="DespairCounter" operation="GT" value="-16800"/>
				</triggered_effect>
				
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDespairCureDisplayPositive03">
					<requirement name="!HasBuff" buff="buffDespairCureDisplayPositive03"/>
					<requirement name="CVarCompare" cvar="DespairCounter" operation="LT" value="-16800"/>
					<requirement name="CVarCompare" cvar="DespairCounter" operation="GT" value="-25200"/>
				</triggered_effect>
			
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDespair01Untreated">
					<requirement name="!HasBuff" buff="buffDespair01Untreated"/>
					<requirement name="CVarCompare" cvar="DespairCounter" operation="GT" value="0"/>
					<requirement name="CVarCompare" cvar="DespairCounter" operation="LT" value="@$DespairStage2Duration"/>
					<requirement name="CVarCompare" cvar="$DespairCureCounter" operation="LTE" value="0"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDespair01GetBetter">
					<requirement name="!HasBuff" buff="buffDespair01GetBetter"/>
					<requirement name="CVarCompare" cvar="DespairCounter" operation="GT" value="0"/>
					<requirement name="CVarCompare" cvar="DespairCounter" operation="LT" value="@$DespairStage2Duration"/>
					<requirement name="CVarCompare" cvar="$DespairCureCounter" operation="GT" value="0"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDespair01GetBetter">
					<requirement name="HasBuff" buff="buffDespair01GetBetter"/>
					<requirement name="CVarCompare" cvar="DespairCounter" operation="LTE" value="0"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDespair02Untreated">
					<requirement name="!HasBuff" buff="buffDespair02Untreated"/>
					<requirement name="CVarCompare" cvar="DespairCounter" operation="GTE" value="@$DespairStage2Duration"/>
					<requirement name="CVarCompare" cvar="DespairCounter" operation="LT" value="@$DespairStage3Duration"/>
					<requirement name="CVarCompare" cvar="$DespairCureCounter" operation="LTE" value="0"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDespair02GetBetter">
					<requirement name="!HasBuff" buff="buffDespair02GetBetter"/>
					<requirement name="CVarCompare" cvar="DespairCounter" operation="GTE" value="@$DespairStage2Duration"/>
					<requirement name="CVarCompare" cvar="DespairCounter" operation="LT" value="@$DespairStage3Duration"/>
					<requirement name="CVarCompare" cvar="$DespairCureCounter" operation="GT" value="0"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDespair03Untreated">
					<requirement name="!HasBuff" buff="buffDespair03Untreated"/>
					<requirement name="CVarCompare" cvar="DespairCounter" operation="GTE" value="@$DespairStage3Duration"/>
					<requirement name="CVarCompare" cvar="DespairCounter" operation="LT" value="@$DespairMaxDuration"/>
					<requirement name="CVarCompare" cvar="$DespairCureCounter" operation="LTE" value="0"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDespair03GetBetter">
					<requirement name="!HasBuff" buff="buffDespair03GetBetter"/>
					<requirement name="CVarCompare" cvar="DespairCounter" operation="GTE" value="@$DespairStage3Duration"/>
					<requirement name="CVarCompare" cvar="DespairCounter" operation="LT" value="@$DespairMaxDuration"/>
					<requirement name="CVarCompare" cvar="$DespairCureCounter" operation="GT" value="0"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDespair04">
					<requirement name="!HasBuff" buff="buffDespair04"/>
					<requirement name="CVarCompare" cvar="DespairCounter" operation="GTE" value="@$DespairMaxDuration"/>
				</triggered_effect>
			</effect_group>
		</buff>
	
		<!-- blinks the display to show that Despair is getting worse with each hit from an entity -->
		<buff name="buffDespairGetsWorse" name_key="buff Despair Gets Worse" icon="ui_game_symbol_brokenbone" icon_color="255,128,0" hidden="true">
			<stack_type value="ignore"/>
			<duration value="1.1"/>

			<effect_group>
				<!-- Blinks the display -->
				<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffDespair01Untreated,buffDespair01GetBetter,buffDespair02Untreated,buffDespair02GetBetter,buffDespair03Untreated,buffDespair03GetBetter,buffDespairCureDisplayPositive"/>
			</effect_group>
		</buff>
	
		<!-- Decreases the Despair Counter -->
		<buff name="buffDespairAddCure" name_key="buff Despair Add Cure" hidden="true" remove_on_death="false" icon="ui_game_symbol_speed">
			<stack_type value="ignore"/>
			<duration value=".1"/>

			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$buffDespairAddCurePerc" operation="multiply" value="@$DespairMaxDuration"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$buffDespairAddCurePerc" operation="divide" value="100"/>

				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$DespairCureCounter" operation="add" value="@$buffDespairAddCurePerc"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$buffDespairAddCurePerc" operation="set" value="0"/>

				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$DespairCureCounter" operation="set" value="@$DespairMaxDuration">
					<requirement name="CVarCompare" cvar="$DespairCureCounter" operation="GT" value="@$DespairMaxDuration"/>
				</triggered_effect>
			
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffDespairMain"/>
			</effect_group>
		</buff>
	
		<!-- Sets up the cure display -->
		<buff name="buffDespairCureDisplay" name_key="buffDespairCureDisplayName" description_key="buffDespairCureDisplayDesc" showonhud="false" remove_on_death="false" icon="ui_game_symbol_intellect" icon_color="0,128,0">
			<duration value="0"/>
			<update_rate value="1.7"/>
			<display_value_key value="{0:0.0}%"/>
			<display_value value=".DespairCureDisplayPerc"/>

			<effect_group>
				<requirements compare_type="or">
					<requirement name="CVarCompare" cvar="$DespairCureCounter" operation="LTE" value="0"/>
					<requirement name="!HasBuff" buff="buffDespairMain"/>
				</requirements>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDespairCureDisplay"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$DespairCureCounter" operation="set" value="0"/>
			</effect_group>

			<effect_group>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".DespairCureDisplayPerc" operation="set" value="0"/>
			</effect_group>
		</buff>
	
		<buff name="buffDespairCureDisplayPositive01" name_key="buffDespairCureDisplayPositive01Name" description_key="buffDespairCureDisplayPositive01Desc" remove_on_death="false" icon="ui_game_symbol_muscle" icon_color="208,255,20" showonhud="false">
			<duration value="0"/>
			<!-- <update_rate value="1.7"/> -->
			<display_value_key value="{0:0.0}%"/>
			<display_value value=".DespairDisplayPositivePerc"/>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="set" value="-25200"/>
				<requirement name="CVarCompare" cvar="DespairCounter" operation="LTE" value="-25200"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespairCureDisplayPositive02"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespairCureDisplayPositive03"/>
			</effect_group>
		
			<effect_group>
				<requirement name="CVarCompare" cvar="DespairCounter" operation="LT" value="0"/>
				<requirement name="CVarCompare" cvar="DespairCounter" operation="GT" value="-8400"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value=".75"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".DespairDisplayPositivePerc" operation="set" value="@.DespairDisplayPerc"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".DespairDisplayPositivePerc" operation="multiply" value="-1"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".DespairDisplayPositive01HUD" operation="set" value="@.DespairDisplayPositivePerc"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".DespairDisplayPositive01HUD" operation="divide" value="100"/>
					
				<passive_effect name="StaminaChangeOT" operation="perc_add" value="0.05"/>
				<passive_effect name="BuffResistance" operation="base_add" value=".1" tags="buffInjuryBleeding,buffInjuryStunned00,buffInjuryStunned01,buffInjuryStunned01Shotgun,buffInjuryStunned02,buffInjuryStunned02Shotgun,buffInjuryStunned03,buffInjuryStunned03Shotgun,buffFatiguedTrigger,buffArmSprainedCHTrigger,buffLegSprainedCHTrigger,buffLaceration,buffInfectionCatch,buffAbrasionCatch,buffInjuryStunned01CHTrigger,buffInjuryBleedingTwo,buffInjuryBleedingBarbedWire"/>
				<passive_effect name="GeneralDamageResist" operation="base_add" value=".05"/>
			</effect_group>
			<effect_group>
				<requirements compare_type="or">
					<requirement name="CVarCompare" cvar="DespairCounter" operation="GT" value="0"/>
					<requirement name="CVarCompare" cvar="DespairCounter" operation="LTE" value="-8400"/>
					<requirement name="!HasBuff" buff="buffDespairCureDisplayPositive01"/>
				</requirements>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDespairCureDisplayPositive01"/>
			</effect_group>
		</buff>
		
		<buff name="buffDespairCureDisplayPositive02" name_key="buffDespairCureDisplayPositive02Name" description_key="buffDespairCureDisplayPositive02Desc" remove_on_death="false" icon="ui_game_symbol_muscle" icon_color="144,238,144" showonhud="false">
			<duration value="0"/>
			<!-- <update_rate value="1.7"/> -->
			<display_value_key value="{0:0.0}%"/>
			<display_value value=".DespairDisplayPositivePerc"/>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="set" value="-25200"/>
				<requirement name="CVarCompare" cvar="DespairCounter" operation="LTE" value="-25200"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDespairCureDisplayPositive01"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDespairCureDisplayPositive03"/>
			</effect_group>
		
			<effect_group>
				<requirement name="CVarCompare" cvar="DespairCounter" operation="LT" value="-8400"/>
				<requirement name="CVarCompare" cvar="DespairCounter" operation="GT" value="-16800"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value=".8"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".DespairDisplayPositivePerc" operation="set" value="@.DespairDisplayPerc"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".DespairDisplayPositivePerc" operation="multiply" value="-1"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".DespairDisplayPositive01HUD" operation="set" value="@.DespairDisplayPositivePerc"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".DespairDisplayPositive01HUD" operation="divide" value="100"/>
					
				<passive_effect name="StaminaChangeOT" operation="perc_add" value="0.1"/>
				<passive_effect name="BuffResistance" operation="base_add" value=".15" tags="buffInjuryBleeding,buffInjuryStunned00,buffInjuryStunned01,buffInjuryStunned01Shotgun,buffInjuryStunned02,buffInjuryStunned02Shotgun,buffInjuryStunned03,buffInjuryStunned03Shotgun,buffFatiguedTrigger,buffArmSprainedCHTrigger,buffLegSprainedCHTrigger,buffLaceration,buffInfectionCatch,buffAbrasionCatch,buffInjuryStunned01CHTrigger,buffInjuryBleedingTwo,buffInjuryBleedingBarbedWire"/>
				<passive_effect name="GeneralDamageResist" operation="base_add" value=".1"/>
			</effect_group>

			<effect_group>
				<requirements compare_type="or">
					<requirement name="CVarCompare" cvar="DespairCounter" operation="GTE" value="-8400"/>
					<requirement name="CVarCompare" cvar="DespairCounter" operation="LTE" value="-16800"/>
					<requirement name="!HasBuff" buff="buffDespairCureDisplayPositive02"/>
				</requirements>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDespairCureDisplayPositive02"/>
			</effect_group>
		</buff>
		
		<buff name="buffDespairCureDisplayPositive03" name_key="buffDespairCureDisplayPositive03Name" description_key="buffDespairCureDisplayPositive03Desc" remove_on_death="false" icon="ui_game_symbol_muscle" icon_color="50,205,50" showonhud="false">
			<duration value="0"/>
			<!-- <update_rate value="1.7"/> -->
			<display_value_key value="{0:0.0}%"/>
			<display_value value=".DespairDisplayPositivePerc"/>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="set" value="-25200"/>
				<requirement name="CVarCompare" cvar="DespairCounter" operation="LTE" value="-25200"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDespairCureDisplayPositive01"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDespairCureDisplayPositive02"/>
			</effect_group>
		
			<effect_group>
				<requirement name="CVarCompare" cvar="DespairCounter" operation="LT" value="-16800"/>
				<requirement name="CVarCompare" cvar="DespairCounter" operation="GT" value="-25200"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value=".85"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".DespairDisplayPositivePerc" operation="set" value="@.DespairDisplayPerc"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".DespairDisplayPositivePerc" operation="multiply" value="-1"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".DespairDisplayPositive01HUD" operation="set" value="@.DespairDisplayPositivePerc"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".DespairDisplayPositive01HUD" operation="divide" value="100"/>
					
				<passive_effect name="StaminaChangeOT" operation="perc_add" value="0.15"/>
				<passive_effect name="BuffResistance" operation="base_add" value=".2" tags="buffInjuryBleeding,buffInjuryStunned00,buffInjuryStunned01,buffInjuryStunned01Shotgun,buffInjuryStunned02,buffInjuryStunned02Shotgun,buffInjuryStunned03,buffInjuryStunned03Shotgun,buffFatiguedTrigger,buffArmSprainedCHTrigger,buffLegSprainedCHTrigger,buffLaceration,buffInfectionCatch,buffAbrasionCatch,buffInjuryStunned01CHTrigger,buffInjuryBleedingTwo,buffInjuryBleedingBarbedWire"/>
				<passive_effect name="GeneralDamageResist" operation="base_add" value=".15"/>
			</effect_group>

			<effect_group>
				<requirements compare_type="or">
					<requirement name="CVarCompare" cvar="DespairCounter" operation="GTE" value="-16800"/>
					<requirement name="!HasBuff" buff="buffDespairCureDisplayPositive03"/>
				</requirements>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDespairCureDisplayPositive03"/>
			</effect_group>
		</buff>
		
		<buff name="buffDespair01Untreated" remove_on_death="false" name_key="buffDespair01UntreatedName" description_key="buffDespair01UntreatedDesc" tooltip_key="buffDespair01UntreatedTooltip" icon="ui_game_symbol_intellect" icon_color="255,244,79" showonhud="false">
			<damage_type value="Disease"/>
			<stack_type value="ignore"/>
			<duration value="0"/>
			<display_value_key value="{0:0.0}%"/>
			<display_value value=".DespairDisplayPerc"/>
			<tags value="deathpenalty_injured"/>

			<effect_group>
				<!-- Blinks the display -->
				<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffDespair01Untreated"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair01GetBetter"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair02Untreated"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair02GetBetter"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair03Untreated"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair03GetBetter"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="DespairCounter" operation="LTE" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDespair01Untreated"/>
			</effect_group>
			<!-- <effect_group> -->
			<!-- <passive_effect name="StaminaChangeOT" operation="perc_add" value="-.05"/> -->
			<!-- </effect_group> -->
		</buff>
	
		<buff name="buffDespair01GetBetter" remove_on_death="false" name_key="buffDespair01GetBetterName" description_key="buffDespair01GetBetterDesc" icon="ui_game_symbol_intellect" icon_color="219,112,147" showonhud="false">
			<damage_type value="Disease"/>
			<stack_type value="ignore"/>
			<duration value="0"/>
			<display_value_key value="{0:0.0}%"/>
			<display_value value=".DespairDisplayPerc"/>
			<tags value="deathpenalty_injured"/>

			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair01Untreated"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair02Untreated"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair02GetBetter"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair03Untreated"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair03GetBetter"/>
			</effect_group>
		</buff>
	
		<buff name="buffDespair02Untreated" remove_on_death="false" name_key="buffDespair02UntreatedName" description_key="buffDespair02UntreatedDesc" icon="ui_game_symbol_intellect" icon_color="255,128,0" showonhud="false">
			<damage_type value="Disease"/>
			<stack_type value="ignore"/>
			<duration value="0"/>
			<display_value_key value="{0:0.0}%"/>
			<display_value value=".DespairDisplayPerc"/>
			<tags value="deathpenalty_injured"/>

			<effect_group>
				<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffDespair02Untreated"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair01Untreated"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair01GetBetter"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair02GetBetter"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair03Untreated"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair03GetBetter"/>
			</effect_group>

			<effect_group>
				<passive_effect name="StaminaChangeOT" operation="perc_add" value="-.15"/>
			</effect_group>
		</buff>
	
		<buff name="buffDespair02GetBetter" remove_on_death="false" name_key="buffDespair02GetBetterName" description_key="buffDespair02GetBetterDesc" icon="ui_game_symbol_intellect" icon_color="219,112,147" showonhud="false">
			<damage_type value="Disease"/>
			<stack_type value="ignore"/>
			<duration value="0"/>
			<display_value_key value="{0:0.0}%"/>
			<display_value value=".DespairDisplayPerc"/>
			<tags value="deathpenalty_injured"/>

			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair01Untreated"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair01GetBetter"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair02Untreated"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair03Untreated"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair03GetBetter"/>
			</effect_group>

			<effect_group>
				<passive_effect name="StaminaChangeOT" operation="perc_add" value="-.075"/>
			</effect_group>
		</buff>
	
		<buff name="buffDespair03Untreated" remove_on_death="false" name_key="buffDespair03UntreatedName" description_key="buffDespair03UntreatedDesc" icon="ui_game_symbol_intellect" icon_color="255,0,0" icon_blink="true" showonhud="false">
			<damage_type value="Disease"/>
			<stack_type value="ignore"/>
			<duration value="0"/>
			<display_value_key value="{0:0.0}%"/>
			<display_value value=".DespairDisplayPerc"/>
			<tags value="deathpenalty_injured"/>

			<effect_group>
				<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffDespair03Untreated"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair01Untreated"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair01GetBetter"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair02Untreated"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair02GetBetter"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair03GetBetter"/>
			</effect_group>

			<effect_group>
				<passive_effect name="AttributeLevel" operation="base_subtract" value="1"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffPerkAbilityUpdate"/>
				<triggered_effect trigger="onSelfBuffRemove" action="AddBuff" buff="buffPerkAbilityUpdate"/>
				<passive_effect name="StaminaChangeOT" operation="perc_add" value="-.25"/>
			</effect_group>
		</buff>
	
		<buff name="buffDespair03GetBetter" remove_on_death="false" name_key="buffDespair03GetBetterName" description_key="buffDespair03GetBetterDesc" icon="ui_game_symbol_intellect" icon_color="219,112,147" showonhud="false">
			<damage_type value="Disease"/>
			<stack_type value="ignore"/>
			<duration value="0"/>
			<display_value_key value="{0:0.0}%"/>
			<display_value value=".DespairDisplayPerc"/>
			<tags value="deathpenalty_injured"/>

			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair01Untreated"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair01GetBetter"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair02Untreated"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair02GetBetter"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair03Untreated"/>
			</effect_group>

			<effect_group>
				<passive_effect name="AttributeLevel" operation="base_subtract" value="1"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffPerkAbilityUpdate"/>
				<triggered_effect trigger="onSelfBuffRemove" action="AddBuff" buff="buffPerkAbilityUpdate"/>
				<passive_effect name="StaminaChangeOT" operation="perc_add" value="-.125"/>
			</effect_group>
		</buff>
	
		<buff name="buffDespair04" tooltip_key="buffDespair04Tooltip" icon="ui_game_symbol_near_death_trauma" icon_color="255,0,0" icon_blink="true" showonhud="false">
			<damage_type value="Infection"/>
			<stack_type value="ignore"/>
			<duration value="0"/>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="set" value="@$DespairMaxDuration"/>
				<requirement name="CVarCompare" cvar="DespairCounter" operation="GTE" value="@$DespairMaxDuration"/>
			</effect_group>

			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyStats" stat="Health" operation="subtract" value="2"/>
				<triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="buff_bleeding" play_in_head="true"/>
				<triggered_effect trigger="onSelfBuffRemove" action="StopSound" sound="buff_bleeding" play_in_head="true"/>
				<triggered_effect trigger="onSelfLeaveGame" action="StopSound" sound="buff_bleeding" play_in_head="true"/>
				<triggered_effect trigger="onSelfEnteredGame" action="PlaySound" sound="buff_bleeding" play_in_head="true"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar="DespairCounter" operation="set" value="@$DespairStage2Duration"/>
				<triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar="DespairCounterRespawn" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair01Untreated"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair01GetBetter"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair02Untreated"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair02GetBetter"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair03Untreated"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffDespair03GetBetter"/>
				<triggered_effect trigger="onSelfDied" action="RemoveBuff" buff="buffDespair04"/>
				<!-- <triggered_effect trigger="onSelfDied" action="RemoveBuff" buff="buffDespairMain"/>			 -->
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDespair04">
					<requirement name="CVarCompare" cvar="DespairCounter" operation="LT" value="@$DespairMaxDuration"/>
				</triggered_effect>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDespair04">
					<requirement name="HasBuff" buff="buffDespairCureDisplay"/>
				</triggered_effect>
			</effect_group>
		</buff>
	
		<!-- *** signal buff to show current despair rate -->
		<buff name="buffDespairCounter" tooltip_key="buffDespairCounterTooltip" name_key="buffDespairCounterName" description_key="buffDespairCounterDesc" hidden="true" icon_color="0,128,128" icon="ui_game_symbol_despair_counter">
			<stack_type value="ignore"/>
			<update_rate value="1"/>
			<display_value_key value="{0:0.00}"/>
			<!-- <display_value_format value="time"/> -->
			<display_value value="DespairCounterModifier"/>
		</buff>
		
		<!-- *** despair meds blocking buff -->
		<buff name="buffLithiumBlocker" tooltip_key="buffLithiumBlockerTooltip" name_key="buffLithiumBlockerName" description_key="buffLithiumBlockerDesc" showonhud="true" icon_color="219,112,147" icon="ui_game_symbol_pills" icon_blink="true">
			<stack_type value="ignore"/>
			<duration value="1500"/>
			<update_rate value="1"/>
			<display_value_key value="{0:0.0}"/>
			<display_value_format value="time"/>
			<display_value value="lithiumblocker"/>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="lithiumblocker" operation="set" value="1500"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffLithiumResistance"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="lithiumblocker" operation="subtract" value="1"/>
				<triggered_effect trigger="onSelfBuffFinish" action="RemoveBuff" buff="buffLithiumBlocker"/>
				<triggered_effect trigger="onSelfBuffFinish" action="ModifyCVar" cvar="lithiumblocker" operation="set" value="0"/>
			</effect_group>
			<effect_group>
				<passive_effect name="WaterChangeOT" operation="base_subtract" value=".05"/>
			</effect_group>
		</buff>
		
		<buff name="buffLithiumResistance" hidden="true">
			<duration value="1"/>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="lithiumrescount" operation="add" value=".5"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffFinish" action="ModifyCVar" cvar="lithiumrescount" operation="set" value="15"/>
				<requirement name="CVarCompare" cvar="lithiumrescount" operation="GTE" value="15"/>
			</effect_group>
		</buff>
		
		<buff name="buffStJohnsWortBlocker" tooltip_key="buffLithiumBlockerTooltip" name_key="buffStJohnsWortBlockerName" description_key="buffLithiumBlockerDesc" showonhud="true" icon_color="255,196,12" icon="ui_game_symbol_pills" icon_blink="true">
			<stack_type value="ignore"/>
			<duration value="600"/>
			<update_rate value="1"/>
			<display_value_key value="{0:0.0}"/>
			<display_value_format value="time"/>
			<display_value value="stjohnswortblocker"/>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="stjohnswortblocker" operation="set" value="600"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffStJohnsWortResistance"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="stjohnswortblocker" operation="subtract" value="1"/>
				<triggered_effect trigger="onSelfBuffFinish" action="RemoveBuff" buff="buffStJohnsWortBlocker"/>
				<triggered_effect trigger="onSelfBuffFinish" action="ModifyCVar" cvar="stjohnswortblocker" operation="set" value="0"/>
			</effect_group>
			<effect_group>
				<passive_effect name="WaterChangeOT" operation="base_subtract" value=".05"/>
			</effect_group>
		</buff>
		
		<buff name="buffStJohnsWortResistance" hidden="true">
			<duration value="1"/>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="wortrescount" operation="add" value=".25"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffFinish" action="ModifyCVar" cvar="wortrescount" operation="set" value="5"/>
				<requirement name="CVarCompare" cvar="wortrescount" operation="GTE" value="5"/>
			</effect_group>
		</buff>
		
		<!-- *** dummy buffs for manipulating cvars for UI elements -->
		<buff name="buffWarm" hidden="true">
			<stack_type value="replace"/>
			<duration value="0"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="warmAlpha" operation="set" value="255"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffDespairMedBlocker"/>
				<requirement name="HasBuff" buff="buffShelter"/>
				<requirement name="HasBuff" buff="buffWellLit"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="warmAlpha" operation="set" value="255"/>
				<requirement name="HasBuff" buff="buffCampfireAOEEffect"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWarmFade"/>
				<requirement name="!HasBuff" buff="buffCampfireAOEEffect"/>
			</effect_group>
		</buff>
	
		<buff name="buffWarmFade" hidden="true">
			<stack_type value="ignore"/>
			<duration value="5"/>
			<update_rate value=".1"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWarm"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="warmAlpha" operation="set" value="255"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="warmAlpha" operation="subtract" value="5"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="warmAlpha" operation="set" value="0"/>
				<requirement name="CVarCompare" cvar="warmAlpha" operation="LTE" value="0"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffFinish" action="ModifyCVar" cvar="warmAlpha" operation="set" value="0"/>
			</effect_group>
		</buff>
	
		<buff name="buffShelter" hidden="true">
			<stack_type value="ignore"/>
			<duration value="0"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="shelterAlpha" operation="set" value="255"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffDespairMedBlocker"/>
				<requirement name="HasBuff" buff="buffWarm"/>
				<requirement name="HasBuff" buff="buffWellLit"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="shelterAlpha" operation="set" value="255"/>
				<requirement name="IsIndoors"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffShelterFade"/>
				<requirement name="!IsIndoors"/>
			</effect_group>
		</buff>
	
		<buff name="buffShelterFade" hidden="true">
			<stack_type value="ignore"/>
			<duration value="5"/>
			<update_rate value=".1"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffShelter"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="shelterAlpha" operation="set" value="255"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="shelterAlpha" operation="subtract" value="5"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="shelterAlpha" operation="set" value="0"/>
				<requirement name="CVarCompare" cvar="shelterAlpha" operation="LTE" value="0"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffFinish" action="ModifyCVar" cvar="shelterAlpha" operation="set" value="0"/>
			</effect_group>
		</buff>
	
		<buff name="buffWellLit" hidden="true">
			<stack_type value="ignore"/>
			<duration value="0"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="welllitAlpha" operation="set" value="255"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffDespairMedBlocker"/>
				<requirement name="HasBuff" buff="buffWarm"/>
				<requirement name="HasBuff" buff="buffShelter"/>
			</effect_group>
			<effect_group compare_type="or">
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="welllitAlpha" operation="set" value="255"/>
				<requirement name="HasBuff" buff="buffFlashLightActive"/>
				<requirement name="HasBuff" buff="buffHandTorchActive"/>
				<requirement name="HasBuff" buff="buffHelmetLightActive"/>
				<requirement name="HasBuff" buff="buffNVGActive"/>
				<requirement name="HasBuff" buff="buffBurningShaftActive"/>
				<requirement name="HasBuff" buff="buffWeaponLightActive"/>
				<requirement name="HasBuff" buff="buffWallTorch"/>
				<requirement name="HasBuff" buff="buffCampfireAOEEffect"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWellLitFade"/>
				<requirement name="!HasBuff" buff="buffFlashLightActive"/>
				<requirement name="!HasBuff" buff="buffHandTorchActive"/>
				<requirement name="!HasBuff" buff="buffHelmetLightActive"/>
				<requirement name="!HasBuff" buff="buffNVGActive"/>
				<requirement name="!HasBuff" buff="buffBurningShaftActive"/>
				<requirement name="!HasBuff" buff="buffWeaponLightActive"/>
				<requirement name="!HasBuff" buff="buffWallTorch"/>
				<requirement name="!HasBuff" buff="buffCampfireAOEEffect"/>
			</effect_group>
		</buff>
	
		<buff name="buffWellLitFade" hidden="true">
			<stack_type value="ignore"/>
			<duration value="5"/>
			<update_rate value=".1"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWellLit"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="welllitAlpha" operation="set" value="255"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="welllitAlpha" operation="subtract" value="5"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="welllitAlpha" operation="set" value="0"/>
				<requirement name="CVarCompare" cvar="welllitAlpha" operation="LTE" value="0"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffFinish" action="ModifyCVar" cvar="welllitAlpha" operation="set" value="0"/>
			</effect_group>
		</buff>
		
		<buff name="buffDespairMedBlocker" name_key="buffDespairMedBlockerName" description_key="buffDespairMedBlockerDesc" tooltip_key="buffDespairMedBlockerTooltip" icon="ui_game_symbol_pills" remove_on_death="true" icon_color="255,0,0" icon_blink="true">
			<stack_type value="ignore"/>
			<duration value="0"/>
			<update_rate value=".1"/>
			
			<effect_group compare_type="or">
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDespairMedBlocker"/>
				<requirement name="!HasBuff" buff="buffWarm"/>
				<requirement name="!HasBuff" buff="buffShelter"/>
				<requirement name="!HasBuff" buff="buffWellLit"/>
			</effect_group>
		</buff>
		
		<!-- *** poison -->
		<buff name="buffPoisoned" name_key="buffPoisonedName" description_key="buffPoisonedDesc" tooltip_key="buffPoisonedTooltip" icon="ui_game_symbol_skull" remove_on_death="true" icon_color="255,0,255" icon_blink="true">
			<damage_type value="Bashing"/>
			<stack_type value="replace"/>
			<duration value="0"/>
			<display_value value=".PoisonDurationDisplay"/>
			<display_value_format value="time"/>
			<display_value_key value="{0:0.00}"/>
			<tags value="deathpenalty_injured"/>
			<!-- <effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,2" tags="buffPoisoned"/>
		</effect_group> -->
		
			<effect_group>
				<!-- Blinks the display -->
				<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffInjuryPoison"/>
			
				<!-- Setup or stack the counters -->
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$PoisonCounter" operation="set" value="25228"/>
				<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="$PoisonCounter" operation="set" value="25228"/>
				<!-- Reduce counter by natural healing rate -->
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$PoisonCounter" operation="subtract" value="@$critHitNaturalHealingRate"/>
				<!-- If the counter LT 0, remove the buff -->
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffInjuryPoison">
					<requirement name="CVarCompare" cvar="$PoisonCounter" operation="LTE" value="0"/>
				</triggered_effect>
				<!-- Reset the counters/cvars -->
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$PoisonCounter" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="$PoisonNextBlur" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$PoisonNextBlur" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".PoisonHealthBlockage" operation="set" value="0"/>
			</effect_group>

			<effect_group name="DisplayDuration">
				<!-- Handlers for the display -->
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".PoisonDurationDisplay" operation="set" value="@$PoisonCounter"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".PoisonDurationDisplay" operation="divide" value="@$critHitNaturalHealingRate"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".PoisonDurationDisplay" operation="set" value="0"/>
			</effect_group>
			<effect_group name="getting hit makes it worse">
				<!-- If the counter is GT, clamp it -->
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$PoisonCounter" operation="set" value="25228">
					<requirement name="CVarCompare" cvar="$PoisonCounter" operation="GT" value="25228"/>
				</triggered_effect>
			</effect_group>

			<effect_group name="periodic blur">
				<!-- If counter is LT next blur OR next blur = 0 -->
				<requirements compare_type="or">
					<requirement name="CVarCompare" cvar="$PoisonCounter" operation="LT" value="@$PoisonNextBlur"/>
					<requirement name="CVarCompare" cvar="$PoisonNextBlur" operation="Equals" value="0"/>
				</requirements>
				<!-- If next blur = 0, do the blur -->
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffInjuryPoisonBlur">
					<requirement name="CVarCompare" cvar="$PoisonNextBlur" operation="NotEquals" value="0"/>
				</triggered_effect>
				<!-- Setup next blur counter with random -->
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".dummy" operation="set" value="@$PoisonCounter"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".dummy" operation="subtract" value="randomint(120,600)"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$PoisonNextBlur" operation="set" value="@.dummy"/>
			</effect_group>

			<effect_group>
				<!-- Setup the max health blockage based on the remaining counter -->
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".PoisonHealthBlockage" operation="set" value="@$PoisonCounter"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".PoisonHealthBlockage" operation="divide" value="1009"/><!-- 25 @ 25200s -->
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".PoisonHealthBlockage" operation="set" value="@$PoisonCounter"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".PoisonHealthBlockage" operation="divide" value="1009"/><!-- 25 @ 25200s -->
				<passive_effect name="HealthMaxBlockage" operation="base_add" value="@.PoisonHealthBlockage"/>
				<!-- Reduce Perk Attributes by 1 and recalculate all abilities -->
				<passive_effect name="AttributeLevel" operation="base_subtract" value="1"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffPerkAbilityUpdate"/>
				<triggered_effect trigger="onSelfBuffStack" action="AddBuff" buff="buffPerkAbilityUpdate"/>
				<triggered_effect trigger="onSelfBuffRemove" action="AddBuff" buff="buffPerkAbilityUpdate"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyStats" stat="Health" operation="subtract" value=".05"/>
				<triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="fx_acid" play_in_head="true"/>
				<triggered_effect trigger="onSelfBuffRemove" action="StopSound" sound="fx_acid" play_in_head="true"/>
				<triggered_effect trigger="onSelfLeaveGame" action="StopSound" sound="fx_acid" play_in_head="true"/>
				<triggered_effect trigger="onSelfEnteredGame" action="PlaySound" sound="fx_acid" play_in_head="true"/>
				<triggered_effect trigger="onSelfDied" action="ModifyScreenEffect" effect_name="Infected" intensity="0" fade="0"/>
			</effect_group>
		</buff>
	
		<buff name="buffInjuryPoisonBlur" name_key="buffInjuryPoisonBlurName" icon="ui_game_symbol_trash" icon_color="255,128,0" hidden="true">
			<damage_type value="Bashing"/>
			<duration value="5"/>

			<effect_group>
				<!-- Blinks the display -->
				<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,4" tags="buffInjuryPoison"/>
				<!-- Handlers for screen effects -->
				<triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="1" fade="1" effect_name="Infected"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" intensity="0" fade="1" effect_name="Infected"/>
				<!-- Handlers for sounds -->
				<triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="buff_bleeding" play_in_head="true"/>
				<triggered_effect trigger="onSelfEnteredGame" action="PlaySound" sound="buff_bleeding" play_in_head="true"/>
				<triggered_effect trigger="onSelfBuffRemove" action="FadeOutSound" sound="buff_bleeding" play_in_head="true"/>
				<triggered_effect trigger="onSelfLeaveGame" action="StopSound" sound="buff_bleeding" play_in_head="true"/>
				<!-- Handlers for camera shake -->
				<triggered_effect trigger="onSelfBuffStart" action="ShakeCamera" shake_speed="0.02" shake_amplitude="60" shake_time="10"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ShakeCamera" shake_speed="0" shake_amplitude="0" shake_time="10"/>
			</effect_group>
		</buff>
	
		<!-- *** zombies in range affect despair -->
		<buff name="buffDespairAOETrigger" hidden="true">
			<stack_type value="ignore"/>
			<duration value="0"/>
		
			<effect_group>
				<requirement name="EntityTagCompare" tags="entity,zombie,walker"/>
				<requirement name="!EntityTagCompare" tags="feral"/>
				<requirement name="!EntityTagCompare" tags="radiated"/>
				<requirement name="!EntityTagCompare" tags="mutated"/>
				<requirement name="!EntityTagCompare" tags="frozen"/>
				<requirement name="!HasBuff" buff="buffDespairFeralAOE"/>
				<requirement name="!HasBuff" buff="buffDespairRadiatedAOE"/>
				<requirement name="!HasBuff" buff="buffDespairMutatedAOE"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" target="selfAOE" range="2" buff="buffDespairAOE"/>
			</effect_group>
			
			<effect_group>
				<requirement name="EntityTagCompare" tags="entity,zombie,walker,feral" has_all_tags="true"/>
				<requirement name="!EntityTagCompare" tags="radiated"/>
				<requirement name="!EntityTagCompare" tags="mutated"/>
				<requirement name="!EntityTagCompare" tags="frozen"/>
				<requirement name="!HasBuff" buff="buffDespairRadiatedAOE"/>
				<requirement name="!HasBuff" buff="buffDespairMutatedAOE"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" target="selfAOE" range="3" buff="buffDespairFeralAOE"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" target="selfAOE" buff="buffDespairAOE"/>
			</effect_group>
			
			<effect_group>
				<requirement name="EntityTagCompare" tags="entity,zombie,walker,frozen" has_all_tags="true"/>
				<requirement name="!EntityTagCompare" tags="radiated"/>
				<requirement name="!EntityTagCompare" tags="mutated"/>
				<requirement name="!EntityTagCompare" tags="feral"/>
				<requirement name="!HasBuff" buff="buffDespairRadiatedAOE"/>
				<requirement name="!HasBuff" buff="buffDespairMutatedAOE"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" target="selfAOE" range="3" buff="buffDespairFeralAOE"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" target="selfAOE" buff="buffDespairAOE"/>
			</effect_group>
			
			<effect_group>
				<requirement name="EntityTagCompare" tags="entity,zombie,walker,feral,radiated" has_all_tags="true"/>
				<requirement name="!HasBuff" buff="buffDespairMutatedAOE"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" target="selfAOE" range="4" buff="buffDespairRadiatedAOE"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" target="selfAOE" buff="buffDespairAOE"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" target="selfAOE" buff="buffDespairFeralAOE"/>
			</effect_group>
			
			<effect_group>
				<requirement name="EntityTagCompare" tags="entity,zombie,walker,feral,mutated" has_all_tags="true"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" target="selfAOE" range="5" buff="buffDespairMutatedAOE"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" target="selfAOE" buff="buffDespairAOE"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" target="selfAOE" buff="buffDespairFeralAOE"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" target="selfAOE" buff="buffDespairRadiatedAOE"/>
			</effect_group>
		</buff>
	
		<buff name="buffDespairAOE" name_key="buffDespairAOEName" description_key="buffDespairAOEDesc" tooltip_key="" icon="ui_game_symbol_despair_counter" icon_color="139,0,0" remove_on_death="false" icon_blink="true" hidden="true">
			<stack_type value="replace"/>
			<display_value value="zombiedespairmodifier"/>
			<display_value_key value="+{0:0.00}"/>
			<duration value="2"/>
		
			<effect_group>
				<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffDespair01Untreated,buffDespair01GetBetter,buffDespair02Untreated,buffDespair02GetBetter,buffDespair03Untreated,buffDespair03GetBetter,buffDespairCureDisplayPositive"/>
				<triggered_effect trigger="onSelfEnteredGame" action="RemoveBuff" buff="buffDespairAOE"/>
			</effect_group>
			
			<effect_group compare_type="or">
				<requirement name="!HasBuff" buff="buffDespairFeralAOE"/>
				<requirement name="!HasBuff" buff="buffDespairRadiatedAOE"/>
				<requirement name="!HasBuff" buff="buffDespairMutatedAOE"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="zombiedespairmodifier" operation="set" value="1.5"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="@zombiedespairmodifier"/>
			</effect_group>
		</buff>
	
		<buff name="buffDespairFeralAOE" name_key="buffDespairFeralAOEName" description_key="buffDespairFeralAOEDesc" tooltip_key="" icon="ui_game_symbol_despair_counter" icon_color="255,255,0" remove_on_death="false" icon_blink="true" hidden="true">
			<stack_type value="replace"/>
			<display_value value="zombiedespairmodifier"/>
			<display_value_key value="+{0:0.00}"/>
			<duration value="2"/>
		
			<effect_group>
				<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffDespair01Untreated,buffDespair01GetBetter,buffDespair02Untreated,buffDespair02GetBetter,buffDespair03Untreated,buffDespair03GetBetter"/>
				<triggered_effect trigger="onSelfEnteredGame" action="RemoveBuff" buff="buffDespairFeralAOE"/>
			</effect_group>
			
			<effect_group compare_type="or">
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="zombiedespairmodifier" operation="set" value="1.75"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="@zombiedespairmodifier"/>
			</effect_group>
		</buff>
	
		<buff name="buffDespairRadiatedAOE" name_key="buffDespairRadiatedAOEName" description_key="buffDespairRadiatedAOEDesc" tooltip_key="" icon="ui_game_symbol_despair_counter" icon_color="0,255,0" remove_on_death="false" icon_blink="true" hidden="true">
			<stack_type value="replace"/>
			<display_value value="zombiedespairmodifier"/>
			<display_value_key value="+{0:0.00}"/>
			<duration value="2"/>
		
			<effect_group>
				<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffDespair01Untreated,buffDespair01GetBetter,buffDespair02Untreated,buffDespair02GetBetter,buffDespair03Untreated,buffDespair03GetBetter"/>
				<triggered_effect trigger="onSelfEnteredGame" action="RemoveBuff" buff="buffDespairRadiatedAOE"/>
			</effect_group>
			
			<effect_group compare_type="or">
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="zombiedespairmodifier" operation="set" value="2"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="@zombiedespairmodifier"/>
			</effect_group>
		</buff>
	
		<buff name="buffDespairMutatedAOE" name_key="buffDespairMutatedAOEName" description_key="buffDespairMutatedAOEDesc" tooltip_key="" icon="ui_game_symbol_despair_counter" icon_color="245,199,26" remove_on_death="false" icon_blink="true" hidden="true">
			<stack_type value="replace"/>
			<display_value value="zombiedespairmodifier"/>
			<display_value_key value="+{0:0.00}"/>
			<duration value="2"/>
		
			<effect_group>
				<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffDespair01Untreated,buffDespair01GetBetter,buffDespair02Untreated,buffDespair02GetBetter,buffDespair03Untreated,buffDespair03GetBetter"/>
				<triggered_effect trigger="onSelfEnteredGame" action="RemoveBuff" buff="buffDespairMutatedAOE"/>
			</effect_group>
			
			<effect_group compare_type="or">
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="zombiedespairmodifier" operation="set" value="2.25"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="@zombiedespairmodifier"/>
			</effect_group>
		</buff>
		
		<!-- *** Fatties are Boomers -->
		<buff name="buffExplodeEffect">
			<effect_group>
				<!-- <triggered_effect trigger="onOtherDamagedSelf" action="AddBuff" buff="buffCopTimerCheck"/> -->
				<triggered_effect trigger="onSelfExplosionAttackedOther" target="other" tags="player" action="AddBuff" buff="buffBoomerHorde">
					<requirement name="EntityTagCompare" target="other" tags="player"/>
					<requirement name="!EntityTagCompare" target="other" tags="zombie"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfExplosionDamagedOther" target="other" tags="player" action="AddBuff" buff="buffBoomerHorde">
					<requirement name="EntityTagCompare" target="other" tags="player"/>
					<requirement name="!EntityTagCompare" target="other" tags="zombie"/>
				</triggered_effect>
			</effect_group>
		</buff>

		<buff name="buffBoomerHorde">
			<duration value="5"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="CallGameEvent" event="boomer_horde_sequence"/>
				<!-- <triggered_effect trigger="onSelfBuffStart"  action="ModifyScreenEffect" effect_name="Blur" intensity="1" fade=".1"/> -->
				<!-- <triggered_effect trigger="onSelfBuffFinish" action="ModifyScreenEffect" effect_name="Blur" intensity="0" fade="5"/> -->
			</effect_group>
		</buff>
	
		<!-- *** trader buff that reduces despair when in range -->
		<buff name="buffGoodCompany" hidden="true">
			<stack_type value="ignore"/>
			<update_rate value="1"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" target="selfAOE" range="2" buff="buffGoodCompanyFromTrader">
					<requirement name="EntityTagCompare" target="other" tags="player"/>
					<requirement name="!HasBuff" buff="buffCampfireAOEEffect" target="other" tags="player"/>
				</triggered_effect>
			</effect_group>
		</buff>
	
		<buff name="buffGoodCompanyFromTrader" name_key="buffGoodCompanyFromTraderName" description_key="buffGoodCompanyFromTraderDesc" icon="ui_game_symbol_allies" icon_color="0,255,0">
			<stack_type value="replace"/>
			<duration value="5"/>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="DespairCounter" operation="add" value="-1.25">
					<requirement name="!HasBuff" buff="buffDespairCureDisplay"/>
					<requirement name="!HasBuff" buff="buffCampfireAOEEffect"/>
				</triggered_effect>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGoodCompanyFromTrader">
					<requirement name="HasBuff" buff="buffCampfireAOEEffect"/>
				</triggered_effect>
			</effect_group>
		</buff>
		
		<!-- *** bunker buster zombie buff -->
		<buff name="buffBunkerBuster">
			<duration value="6000"/>
		
			<effect_group>
				<!-- <triggered_effect trigger="onSelfBuffStart" action="SetNavObject" nav_object="twitch_explode_v2" add="true" />
			<triggered_effect trigger="onSelfBuffFinish" action="SetNavObject" nav_object="twitch_explode_v2" add="true" /> -->
			
				<passive_effect name="EntityDamage" operation="perc_add" value="-0.1"/>
				<passive_effect name="HealthMax" operation="perc_add" value="-.10"/>
				<passive_effect name="PhysicalDamageResist" operation="perc_add" value="-.25"/>
			</effect_group>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="AttachPrefabToEntity" prefab="@:Other/Items/Weapons/Ranged/TimedCharge/timedChargePrefab.prefab" local_offset="-.06,.2,0.1" local_rotation="-80,180,0" local_scale="1,1,1" parent_transform="Spine1">
					<requirement name="!HasAttachedPrefab" prefab="@:Other/Items/Weapons/Ranged/TimedCharge/timedChargePrefab.prefab" parent_transform="Spine1"/>
				</triggered_effect>
			
				<triggered_effect trigger="onSelfBuffUpdate" action="AttachPrefabToEntity" prefab="@:Other/Items/Weapons/Ranged/TimedCharge/timedChargePrefab.prefab" local_offset="-.06,.2,0.1" local_rotation="-80,180,0" local_scale="1,1,1" parent_transform="Spine1">
					<requirement name="!HasAttachedPrefab" prefab="@:Other/Items/Weapons/Ranged/TimedCharge/timedChargePrefab.prefab" parent_transform="Spine1"/>
				</triggered_effect>
			
				<triggered_effect trigger="onSelfBuffRemove" action="RemovePrefabFromEntity" prefab="timedChargePrefab" parent_transform="Spine1"/>
			
				<triggered_effect trigger="onSelfAttackedOther" action="Explode" blast_power="0" block_damage="750" block_radius="5" entity_damage="30" entity_radius="4"/>
				<triggered_effect trigger="onSelfAttackedOther" action="ModifyStats" stat="Health" operation="set" value="0"/>
				
				<triggered_effect trigger="onSelfDamagedBlock" action="Explode" blast_power="0" block_damage="750" block_radius="5" entity_damage="30" entity_radius="4"/>
				<triggered_effect trigger="onSelfDamagedBlock" action="ModifyStats" stat="Health" operation="set" value="0"/>
				
				<triggered_effect trigger="onSelfDied" action="Explode" blast_power="0" block_damage="0" block_radius="1" entity_damage="50" entity_radius="4"/>
			</effect_group>
		</buff>
		
		<!-- *** disables vehicle when vehicle is submerged -->
		<buff name="NoVehicleUnderwater" hidden="true" remove_on_death="false">
			<stack_type value="ignore"/>
			<duration value="0"/>
			<update_rate value=".1"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="disableVehicle"/>
				<requirements>
					<requirement name="IsAttachedToEntity"/>
					<requirement name="CVarCompare" cvar="_underwater" operation="GTE" value="1"/>
				</requirements>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="disableVehicle"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffNoVehicle"/>
				<requirement name="CVarCompare" cvar="_underwater" operation="LT" value="1"/>
			</effect_group>
		</buff>
		
		<buff name="disableVehicle" hidden="true" remove_on_death="false">
			<stack_type value="ignore"/>
			<duration value="0"/>
			<update_rate value=".1"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="CallGameEvent" event="buff_novehicle_submerged"/>
				<passive_effect name="NoVehicle" operation="base_set" value="1"/>
			</effect_group>
		</buff>

		<buff name="buffNoVehicle" name_key="buff_NoVehicle" description_key="buff_NoVehicleDesc" icon="ui_game_symbol_twitch_no_vehicle" icon_color="255,175,175">
			<stack_type value="replace"/>
			<duration value="0"/>

			<effect_group>
				<!-- Blinks the display -->
				<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="twitch_buffNoVehicle"/>
				<triggered_effect trigger="onSelfEnteredGame" action="RemoveBuff" buff="twitch_buffNoVehicle"/>

				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="twitch_buffNoVehicle">
					<requirement name="HasBuff" buff="twitch_buffVoteNoVehicle"/>
				</triggered_effect>

				<triggered_effect trigger="onSelfBuffFinish" action="PlaySound" sound="twitch_bad_buff_ended" play_in_head="true"/>
			</effect_group>

			<effect_group>
				<passive_effect name="NoVehicle" operation="base_set" value="1"/>
			</effect_group>
		</buff>
	
		<!-- *** brass catcher -->
		<buff name="buffReclaimBrass" hidden="true" remove_on_death="true">
			<stack_type value="replace"/>
			<duration value="0.01"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="CallGameEvent" event="modBrassCatcher" allow_client_call="true"/>
			</effect_group>
		</buff>
		
		<!-- *** critical injury wellness modifier -->
		<buff name="buffCriticalInjuryDetector" hidden="true">
			<stack_type value="ignore"/>
			<duration value="0"/>
			<effect_group>
				<requirements compare_type="or">
					<requirement name="HasBuff" buff="buffInjuryAbrasion"/>
					<requirement name="HasBuff" buff="buffInjuryStunned01"/>
					<requirement name="HasBuff" buff="buffStatusHungry02"/>
					<requirement name="HasBuff" buff="buffStatusHungry03"/>
					<requirement name="HasBuff" buff="buffStatusThirsty02"/>
					<requirement name="HasBuff" buff="buffStatusThirsty03"/>
				</requirements>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWellnessCriticalInjuryOne">
					<requirement name="CVarCompare" cvar="wellness" operation="GTE" value="40"/></triggered_effect>
			</effect_group>
			
			<effect_group>
				<requirements compare_type="or">
					<requirement name="HasBuff" buff="buffLaceration"/>
					<requirement name="HasBuff" buff="buffInjuryBleedingOne"/>
					<requirement name="HasBuff" buff="buffInjuryBleedingTwo"/>
					<requirement name="HasBuff" buff="buffLegSprained"/>
					<requirement name="HasBuff" buff="buffLegBroken"/>
					<requirement name="HasBuff" buff="buffArmSprained"/>
					<requirement name="HasBuff" buff="buffArmBroken"/>
					<requirement name="HasBuff" buff="buffFatigued"/>
					<requirement name="HasBuff" buff="buffInjuryConcussion"/>
					<requirement name="HasBuff" buff="buffFatigued"/>
					<requirement name="HasBuff" buff="buffIsOnFire"/>
					<requirement name="HasBuff" buff="buffDysentery01Untreated"/>
					<requirement name="HasBuff" buff="buffInfection01Untreated"/>
					<requirement name="HasBuff" buff="buffInfection02Untreated"/>
					<requirement name="HasBuff" buff="buffInfection03Untreated"/>
				</requirements>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWellnessCriticalInjuryTwo">
					<requirement name="CVarCompare" cvar="wellness" operation="GTE" value="40"/></triggered_effect>
			</effect_group>
			
			<effect_group>
				<requirements>
					<requirement name="!HasBuff" buff="buffInjuryAbrasion"/>
					<requirement name="!HasBuff" buff="buffInjuryStunned01"/>
					<requirement name="!HasBuff" buff="buffStatusHungry01"/>
					<requirement name="!HasBuff" buff="buffStatusHungry02"/>
					<requirement name="!HasBuff" buff="buffStatusHungry03"/>
					<requirement name="!HasBuff" buff="buffStatusThirsty01"/>
					<requirement name="!HasBuff" buff="buffStatusThirsty02"/>
					<requirement name="!HasBuff" buff="buffStatusThirsty03"/>
				</requirements>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWellnessCriticalInjuryOne"/>
			</effect_group>
			
			<effect_group>
				<requirements>
					<requirement name="!HasBuff" buff="buffLaceration"/>
					<requirement name="!HasBuff" buff="buffInjuryBleedingOne"/>
					<requirement name="!HasBuff" buff="buffInjuryBleedingTwo"/>
					<requirement name="!HasBuff" buff="buffLegSprained"/>
					<requirement name="!HasBuff" buff="buffLegBroken"/>
					<requirement name="!HasBuff" buff="buffArmSprained"/>
					<requirement name="!HasBuff" buff="buffArmBroken"/>
					<requirement name="!HasBuff" buff="buffFatigued"/>
					<requirement name="!HasBuff" buff="buffInjuryConcussion"/>
					<requirement name="!HasBuff" buff="buffFatigued"/>
					<requirement name="!HasBuff" buff="buffIsOnFire"/>
					<requirement name="!HasBuff" buff="buffDysentery01Untreated"/>
					<requirement name="!HasBuff" buff="buffInfection01Untreated"/>
					<requirement name="!HasBuff" buff="buffInfection02Untreated"/>
					<requirement name="!HasBuff" buff="buffInfection03Untreated"/>
				</requirements>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWellnessCriticalInjuryTwo"/>
			</effect_group>
			
			<effect_group>
				<requirements compare_type="or">
					<requirement name="HasBuff" buff="buffDysenteryCureDisplay"/>
					<requirement name="HasBuff" buff="buffInfectionCureDisplay"/>
				</requirements>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWellnessCriticalInjuryTwo"/>
			</effect_group>
		</buff>
		
		<!-- *** death wellness listener -->
		<buff name="buffDeathDetector" hidden="true">
			<stack_type value="ignore"/>
			<duration value="0"/>
			<effect_group>
				<triggered_effect trigger="onSelfDied" action="AddBuff" buff="buffWellnessDeath"/>
			</effect_group>
		</buff>
		
		<!-- *** wellness modifier for minor injuries/debuffs -->
		<buff name="buffWellnessCriticalInjuryOne" hidden="true">
			<stack_type value="ignore"/>
			<duration value="0"/>
			<effect_group>
				<!-- Multiply current wellness by 0.9 (reduce 10%) -->
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="wellness" operation="multiply" value="0.95"/>
				<requirement name="CVarCompare" cvar="wellness" operation="GTE" value="40"/>
			</effect_group>
		</buff>
		
		<!-- *** wellness modifier for major injuries/debuffs -->
		<buff name="buffWellnessCriticalInjuryTwo" hidden="true">
			<stack_type value="ignore"/>
			<duration value="0"/>
			<effect_group>
				<!-- Multiply current wellness by 0.8 (reduce 20%) -->
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="wellness" operation="multiply" value="0.9"/>
				<requirement name="CVarCompare" cvar="wellness" operation="GTE" value="40"/>
			</effect_group>
		</buff>
		
		<!-- *** wellness death penalty modifier -->
		<buff name="buffWellnessDeath" hidden="true">
			<stack_type value="replace"/>
			<duration value="0"/>
			<effect_group>
				<!-- Set wellness to 30 -->
				<triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar="wellness" operation="set" value="40"/>
			</effect_group>
		</buff>
		
		<!-- *** max health & stamina tied to wellness -->
		<buff name="buffWellnessMaxStats" hidden="true">
			<stack_type value="ignore"/>
			<duration value="0"/>
			<update_rate value=".1"/>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="wellness" operation="set" value="40"/>
				<requirement name="CVarCompare" cvar="wellness" operation="LTE" value="40"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="wellness" operation="set" value="260"/>
				<requirement name="CVarCompare" cvar="wellness" operation="GTE" value="260"/>
			</effect_group>
			
			<effect_group>
				<passive_effect name="HealthMax" operation="base_add" value="@wellness"/>
				<passive_effect name="StaminaMax" operation="base_add" value="@wellness"/>
			</effect_group>
		</buff>
		
		<!-- *** buff for wellness from armour -->
		<buff name="buffArmourWellness" hidden="true">
			<duration value="0"/>
			<stack_type value="replace"/>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="armourWornWellness" operation="set" value="@wellness"/>
			</effect_group>	

			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="armourWornWellness" operation="add" value="@.armourWellness"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="wellness" operation="set" value="@armourWornWellness"/>
			</effect_group>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="wellness" operation="subtract" value="@.armourWellness"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".armourWellness" operation="set" value="0"/>
				<requirement name="IsAttachedToEntity"/>
			</effect_group>
		
			<effect_group>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="wellness" operation="subtract" value="@.armourWellness"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".armourWellness" operation="set" value="0"/>
				<requirement name="!IsAttachedToEntity"/>
			</effect_group>
		
		</buff>

		<!-- *** Tier 0 Food Cooldown -->
		<buff name="buffT0FoodTimeTrack" name_key="buffT0FoodTimeTrackName" description_key="buffT0FoodTimeTrackDesc" tooltip_key="buffT0FoodTimeTrackToolTip" icon="ui_game_symbol_cookware" icon_color="253,253,150" remove_on_death="true">
			<stack_type value="replace"/>
			<duration value="150"/><!-- cooldown in seconds -->
			<display_value value="duration"/>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffFinish" action="RemoveBuff" buff="buffT0FoodTimeTrack"/>
			</effect_group>
		</buff>
		
		<!-- *** Tier 1 Food Cooldown -->
		<buff name="buffT1FoodTimeTrack" name_key="buffT1FoodTimeTrackName" description_key="buffT1FoodTimeTrackDesc" tooltip_key="buffT1FoodTimeTrackToolTip" icon="ui_game_symbol_cookware" icon_color="253,253,150" remove_on_death="true">
			<stack_type value="replace"/>
			<duration value="300"/><!-- cooldown in seconds -->
			<display_value value="duration"/>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffFinish" action="RemoveBuff" buff="buffT1FoodTimeTrack"/>
			</effect_group>
		</buff>

		<!-- *** Tier 2 Food Cooldown -->
		<buff name="buffT2FoodTimeTrack" name_key="buffT2FoodTimeTrackName" description_key="buffT2FoodTimeTrackDesc" tooltip_key="buffT2FoodTimeTrackToolTip" icon="ui_game_symbol_cookware" icon_color="202,224,13" remove_on_death="true">
			<stack_type value="replace"/>
			<duration value="400"/>
			<display_value value="duration"/>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffT1FoodTimeTrack"/>
				<requirement name="HasBuff" buff="buffT1FoodTimeTrack"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffFinish" action="RemoveBuff" buff="buffT2FoodTimeTrack"/>
			</effect_group>
		</buff>

		<!-- *** Tier 3 Food Cooldown -->
		<buff name="buffT3FoodTimeTrack" name_key="buffT3FoodTimeTrackName" description_key="buffT3FoodTimeTrackDesc" tooltip_key="buffT3FoodTimeTrackToolTip" icon="ui_game_symbol_cookware" icon_color="60,179,113" remove_on_death="true">
			<stack_type value="replace"/>
			<duration value="500"/>
			<display_value value="duration"/>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffT1FoodTimeTrack"/>
				<requirement name="HasBuff" buff="buffT1FoodTimeTrack"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffT2FoodTimeTrack"/>
				<requirement name="HasBuff" buff="buffT2FoodTimeTrack"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffFinish" action="RemoveBuff" buff="buffT3FoodTimeTrack"/>
			</effect_group>
		</buff>

		<!-- *** Tier 4 Food Cooldown -->
		<buff name="buffT4FoodTimeTrack" name_key="buffT4FoodTimeTrackName" description_key="buffT4FoodTimeTrackDesc" tooltip_key="buffT4FoodTimeTrackToolTip" icon="ui_game_symbol_cookware" icon_color="0,128,0" remove_on_death="true">
			<stack_type value="replace"/>
			<duration value="600"/>
			<display_value value="duration"/>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffT1FoodTimeTrack"/>
				<requirement name="HasBuff" buff="buffT1FoodTimeTrack"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffT2FoodTimeTrack"/>
				<requirement name="HasBuff" buff="buffT2FoodTimeTrack"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffT3FoodTimeTrack"/>
				<requirement name="HasBuff" buff="buffT3FoodTimeTrack"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffFinish" action="RemoveBuff" buff="buffT4FoodTimeTrack"/>
			</effect_group>
		</buff>
		
		<!-- ** Dev Wellness Buff -->
		<buff name="buffWellnessDev" hidden="true" remove_on_death="true">
			<stack_type value="replace"/>
			<duration value=".1"/>
			<effect_group>
				<requirement name="CVarCompare" cvar="wellness" operation="LT" value="260"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" target="self" cvar="wellness" operation="add" value="1"/>
				<triggered_effect trigger="onSelfBuffFinish" action="RemoveBuff" buff="buffWellnessDev"/>
			</effect_group>
		</buff>
		
		<buff name="buffNegativeWellnessDev" hidden="true" remove_on_death="true">
			<stack_type value="replace"/>
			<duration value=".1"/>
			<effect_group>
				<requirement name="CVarCompare" cvar="wellness" operation="LT" value="260"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" target="self" cvar="wellness" operation="add" value="-1"/>
				<triggered_effect trigger="onSelfBuffFinish" action="RemoveBuff" buff="buffNegativeWellnessDev"/>
			</effect_group>
		</buff>
		
		<!-- *** Tier 0 Wellness Buff -->
		<buff name="buffWellnessT0" hidden="true" remove_on_death="true">
			<stack_type value="replace"/>
			<duration value="1"/>
			<effect_group>
				<requirement name="CVarCompare" cvar="wellness" operation="LT" value="260"/>
				<requirement name="!HasBuff" buff="buffT0FoodTimeTrack"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" target="self" cvar="wellness" operation="add" value="2"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" target="self" buff="buffT0FoodTimeTrack"/>
				<triggered_effect trigger="onSelfBuffFinish" action="RemoveBuff" buff="buffWellnessT0"/>
			</effect_group>
		</buff>
		
		<!-- *** Tier 1 Wellness Buff -->
		<buff name="buffWellnessT1" hidden="true" remove_on_death="true">
			<stack_type value="replace"/>
			<duration value="1"/>
			<effect_group>
				<requirement name="CVarCompare" cvar="wellness" operation="LT" value="260"/>
				<requirement name="!HasBuff" buff="buffT1FoodTimeTrack"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" target="self" cvar="wellness" operation="add" value="3"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" target="self" buff="buffT1FoodTimeTrack"/>
				<triggered_effect trigger="onSelfBuffFinish" action="RemoveBuff" buff="buffWellnessT1"/>
			</effect_group>
		</buff>

		<!-- *** Tier 2 Wellness Buff -->
		<buff name="buffWellnessT2" hidden="true" remove_on_death="true">
			<stack_type value="replace"/>
			<duration value="1"/>
			
			<effect_group>
				
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="wellness" operation="LT" value="260"/>
				<requirement name="!HasBuff" buff="buffT1FoodTimeTrack"/>
				<requirement name="!HasBuff" buff="buffT2FoodTimeTrack"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" target="self" cvar="wellness" operation="add" value="4"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" target="self" buff="buffT2FoodTimeTrack"/>
				<triggered_effect trigger="onSelfBuffFinish" action="RemoveBuff" buff="buffWellnessT2"/>
			</effect_group>
		</buff>

		<!-- *** Tier 3 Wellness Buff -->
		<buff name="buffWellnessT3" hidden="true" remove_on_death="true">
			<stack_type value="replace"/>
			<duration value="1"/>
			<effect_group>
				<requirement name="CVarCompare" cvar="wellness" operation="LT" value="260"/>
				<requirement name="!HasBuff" buff="buffT1FoodTimeTrack"/>
				<requirement name="!HasBuff" buff="buffT2FoodTimeTrack"/>
				<requirement name="!HasBuff" buff="buffT3FoodTimeTrack"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" target="self" cvar="wellness" operation="add" value="5"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" target="self" buff="buffT3FoodTimeTrack"/>
				<triggered_effect trigger="onSelfBuffFinish" action="RemoveBuff" buff="buffWellnessT3"/>
			</effect_group>
		</buff>

		<!-- *** Tier 4 Wellness Buff -->
		<buff name="buffWellnessT4" hidden="true" remove_on_death="true">
			<stack_type value="replace"/>
			<duration value="1"/>
			<effect_group>
				<requirement name="CVarCompare" cvar="wellness" operation="LT" value="260"/>
				<requirement name="!HasBuff" buff="buffT1FoodTimeTrack"/>
				<requirement name="!HasBuff" buff="buffT2FoodTimeTrack"/>
				<requirement name="!HasBuff" buff="buffT3FoodTimeTrack"/>
				<requirement name="!HasBuff" buff="buffT4FoodTimeTrack"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" target="self" cvar="wellness" operation="add" value="10"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" target="self" buff="buffT4FoodTimeTrack"/>
				<triggered_effect trigger="onSelfBuffFinish" action="RemoveBuff" buff="buffWellnessT4"/>
			</effect_group>
		</buff>
		
		<!-- *** Negative Wellness Buff -->
		<buff name="buffWellnessNegativeOne" hidden="true" remove_on_death="true">
			<stack_type value="replace"/>
			<duration value="1"/>
			<effect_group>
				<requirement name="!HasBuff" buff="buffDrugVitamins"/>
				<requirement name="CVarCompare" cvar="wellness" operation="GTE" value="40"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" target="self" cvar="wellness" operation="add" value="-1"/>
				<triggered_effect trigger="onSelfBuffFinish" action="RemoveBuff" buff="buffWellnessNegativeOne"/>
			</effect_group>
		</buff>
		
		<buff name="buffWellnessNegativeTwo" hidden="true" remove_on_death="true">
			<stack_type value="replace"/>
			<duration value="1"/>
			<effect_group>
				<requirement name="!HasBuff" buff="buffDrugVitamins"/>
				<requirement name="CVarCompare" cvar="wellness" operation="GTE" value="40"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" target="self" cvar="wellness" operation="add" value="-5"/>
				<triggered_effect trigger="onSelfBuffFinish" action="RemoveBuff" buff="buffWellnessNegativeTwo"/>
			</effect_group>
		</buff>
		
		<!-- *** Helmet water purifier -->
		<buff name="buffHelmetPurifierActivate" hidden="true">
			<stack_type value="effect"/>
			<duration value=".1"/>
			<effect_group>
				<requirement name="CVarCompare" cvar="helmetPurifierDurability" operation="GT" value="0"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffHelmetPurifierActive"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="helmetPurifierDurability" operation="LTE" value="0"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffHelmetPurifierReload"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWaterPurifier"/>
			</effect_group>
		</buff>
		
		<buff name="buffHelmetPurifierDeactivate" hidden="true">
			<stack_type value="effect"/>
			<duration value=".1"/>
			<effect_group>
				<requirement name="CVarCompare" cvar="helmetPurifierDurability" operation="LTE" value="0"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffHelmetPurifierActive"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWaterPurifier"/>
			</effect_group>
		</buff>
		
		<buff name="buffHelmetPurifierActive" name_key="buffHelmetPurifierActive" description_key="buffHelmetPurifierActiveDesc" icon="ui_game_symbol_water" icon_color="0,255,255" showonhud="false">
			<stack_type value="effect"/>
			<duration value="0"/>
			<update_rate value="2"/>
			<display_value value="helmetPurifierDurability"/>
			<display_value_key value="{0:0} uses"/>
			<effect_group>
				<triggered_effect trigger="onSelfAction2End" action="ModifyCVar" cvar="helmetPurifierDurability" operation="subtract" value="1"/>
				<requirement name="CVarCompare" cvar="helmetPurifierDurability" operation="GT" value="0"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="helmetPurifierDurability" operation="LTE" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffHelmetPurifierDeactivate"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWaterPurifier"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="helmetPurifierDurabilityDisplay" operation="set" value="@helmetPurifierDurability"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="helmetPurifierDurabilityDisplay" operation="divide" value="40"/>
			</effect_group>
			<effect_group tiered="false">
				<requirement name="CVarCompare" cvar="helmetPurifierDurability" operation="GTE" value="1"/>
				<passive_effect name="BuffResistance" operation="base_add" value="1" tags="buffDysenteryCatchDrink"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWaterPurifier"/>
				<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWaterPurifier"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="helmetfilterequipped" operation="set" value="1"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="helmetfilterequipped" operation="set" value="0"/>
			</effect_group>
		</buff>
		
		<buff name="buffHelmetPurifierReload" hidden="true">
			<stack_type value="ignore"/>
			<duration value=".1"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffHelmetPurifierActive"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWaterPurifier"/>
				<triggered_effect trigger="onSelfBuffStart" action="CallGameEvent" event="removeWaterFilter" allow_client_call="true">
					<requirement name="PlayerItemCount" item_name="resourceHelmetWaterFilter" operation="GT" value="0"/></triggered_effect>
			</effect_group>
		</buff>
		
		<buff name="buffHelmetPurifierReloadSuccess" name_key="buffHelmetPurifierReloadSuccess" icon="ui_game_symbol_thirst" icon_color="0,255,0" icon_blink="true">
			<stack_type value="ignore"/>
			<duration value="2"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="helmetPurifierDurability" operation="set" value="40"/>
				<triggered_effect trigger="onSelfBuffRemove" action="AddBuff" buff="buffHelmetPurifierActive"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="helmetPurifierDurability" operation="LTE" value="0"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWaterPurifier"/>
			</effect_group>
		</buff>
		
		<!-- *** helmet light -->
		<buff name="buffHelmetLightActivate" hidden="true">
			<stack_type value="effect"/>
			<duration value=".1"/>
			<effect_group>
				<requirement name="CVarCompare" cvar="batteryHelmetLight" operation="GT" value="0"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffHelmetLightActive"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="batteryHelmetLight" operation="LTE" value="0"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffHelmetLightReload"/>
			</effect_group>
		</buff>
		
		<buff name="buffHelmetLightDeactivate" hidden="true">
			<stack_type value="effect"/>
			<duration value=".1"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffHelmetLightActive"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetPartActive" part="HeadLight" active="false"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetPartActive" part="HeadLightCam" active="false"/>
			</effect_group>
		</buff>
		
		<buff name="buffHelmetLightActive" name_key="buffHelmetLightActive" description_key="buffHelmetLightActiveDesc" icon="ui_game_symbol_electric_power" icon_color="0,255,0" showonhud="false">
			<!-- hidden="true" -->
			<stack_type value="effect"/>
			<duration value="0"/>
			<update_rate value="10"/>
			<display_value value="batteryHelmetLight"/>
			<display_value_key value="Helmet: {0:0}%"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffHelmetLight"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetPartActive" part="HeadLight" active="true"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddPartFPV" part="HeadLight" prefab="@:Entities/Lighting/miningHelmetLightSource.prefab" parentTransform="CameraNode" localPos="0,0.1,0" localRot="-90,180,0"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddPartTPV" part="HeadLight" prefab="@:Entities/Lighting/miningHelmetLightSource.prefab" parentTransform="Spotlight" localPos="0,0,0" localRot="90,0,0"/>
				<!-- 100 = 100%, duration = 30 min, ticks every 10 seconds = 180 ticks; 0.556 per tick to be subtracted -->
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$batteryHelmetLightTick" operation="set" value="0.556"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$batteryHelmetLightEfficiency" operation="set" value="1"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$batteryHelmetLightTick" operation="multiply" value="@$batteryHelmetLightEfficiency"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="batteryHelmetLight" operation="subtract" value="@$batteryHelmetLightTick"/>
				
				
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffHelmetLightReload">
					<requirement name="CVarCompare" cvar="batteryHelmetLight" operation="LT" value="0"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffHelmetLightReload">
					<requirement name="CVarCompare" cvar="batteryHelmetLight" operation="LT" value="0"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfBuffRemove" action="SetPartActive" part="HeadLight" active="false"/>
				<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffHelmetLight"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="batteryHelmetLightDisplay" operation="set" value="@batteryHelmetLight"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="batteryHelmetLightDisplay" operation="divide" value="100"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="helmetlightequipped" operation="set" value="1"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="helmetlightequipped" operation="set" value="0"/>
			</effect_group>
		</buff>
		
		<buff name="buffHelmetLightReload" hidden="true">
			<stack_type value="ignore"/>
			<duration value=".1"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffHelmetLightActive"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetPartActive" part="HeadLight" active="false"/>
				<!-- <triggered_effect trigger="onSelfBuffStart" action="SetPartActive" part="HeadLightCam" active="false"/> -->
				<triggered_effect trigger="onSelfBuffStart" action="CallGameEvent" event="removeHelmetBattery" allow_client_call="true">
					<requirement name="PlayerItemCount" item_name="resourceNiCdBattery" operation="GT" value="0"/></triggered_effect>
			</effect_group>
		</buff>
		
		<buff name="buffHelmetLightReloadSuccess" name_key="buffHelmetLightReloadSuccess" icon="ui_game_symbol_electric_power" icon_color="0,255,0" icon_blink="true">
			<stack_type value="ignore"/>
			<duration value="2"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="batteryHelmetLight" operation="set" value="100"/>
				<triggered_effect trigger="onSelfBuffRemove" action="AddBuff" buff="buffHelmetLightActive"/>
			</effect_group>
		</buff>
		
		<!-- *** weapon flashlight -->
		<buff name="buffWeaponLightActivate" hidden="true">
			<stack_type value="effect"/>
			<duration value=".1"/>
			<effect_group>
				<requirement name="CVarCompare" cvar="batteryWeaponLight" operation="GT" value="0"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWeaponLightActive"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="batteryWeaponLight" operation="LTE" value="0"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWeaponLightReload"/>
			</effect_group>
		</buff>
		
		<buff name="buffWeaponLightDeactivate" hidden="true">
			<stack_type value="effect"/>
			<duration value=".1"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWeaponLightActive"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="false" parent_transform="Side" transform_path="lightSource"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="false" parent_transform="Gunjoint" transform_path="flashlight_lightSource"/>
			</effect_group>
		</buff>
		
		<buff name="buffWeaponLightActive" name_key="buffWeaponLightActive" description_key="buffWeaponLightActiveDesc" icon="ui_game_symbol_electric_power" icon_color="255,165,0" showonhud="false">
			<!-- hidden="true" -->
			<stack_type value="effect"/>
			<duration value="0"/>
			<update_rate value="10"/>
			<display_value value="batteryWeaponLight"/>
			<display_value_key value="Weapon: {0:0}%"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffGunFlashlight"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="true" parent_transform="Side" transform_path="lightSource"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="true" parent_transform="#HeldItemRoot" transform_path="flashlight_lightSource"/>
				<!-- <triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="true" parent_transform="#HeldItemRoot" transform_path="flashlight"/> -->
				<!-- <triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="true" parent_transform="Gunjoint" transform_path="flashlight_lightSource"/> -->
				<!-- 100 = 100%, duration = 30 min, ticks every 10 seconds = 180 ticks; 0.556 per tick to be subtracted -->
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$batteryWeaponLightTick" operation="set" value="0.556"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$batteryWeaponLightEfficiency" operation="set" value="1"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$batteryWeaponLightTick" operation="multiply" value="@$batteryWeaponLightEfficiency"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="batteryWeaponLight" operation="subtract" value="@$batteryWeaponLightTick"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWeaponLightReload">
					<requirement name="CVarCompare" cvar="batteryWeaponLight" operation="LT" value="0"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWeaponLightReload">
					<requirement name="CVarCompare" cvar="batteryWeaponLight" operation="LT" value="0"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfBuffRemove" action="SetTransformActive" active="false" parent_transform="#HeldItemRoot" transform_path="flashlight_lightSource"/>
				<triggered_effect trigger="onSelfBuffRemove" action="SetTransformActive" active="false" parent_transform="Side" transform_path="lightSource"/>
				<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffGunFlashlight"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="batteryWeaponLightDisplay" operation="set" value="@batteryWeaponLight"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="batteryWeaponLightDisplay" operation="divide" value="100"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="gunlightequipped" operation="set" value="1"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="gunlightequipped" operation="set" value="0"/>
			</effect_group>
		</buff>
		
		<buff name="buffWeaponLightReload" hidden="true">
			<stack_type value="ignore"/>
			<duration value=".1"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWeaponLightActive"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="false" parent_transform="Side" transform_path="lightSource"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="false" parent_transform="Gunjoint" transform_path="flashlight_lightSource"/>
				<triggered_effect trigger="onSelfBuffStart" action="CallGameEvent" event="removeWeaponBattery" allow_client_call="true">
					<requirement name="PlayerItemCount" item_name="resourceNiCdBattery" operation="GT" value="0"/></triggered_effect>
			</effect_group>
		</buff>
		
		<buff name="buffWeaponLightReloadSuccess" name_key="buffWeaponLightReloadSuccess" icon="ui_game_symbol_electric_power" icon_color="0,255,0" icon_blink="true">
			<stack_type value="ignore"/>
			<duration value="2"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="batteryWeaponLight" operation="set" value="100"/>
				<triggered_effect trigger="onSelfBuffRemove" action="AddBuff" buff="buffWeaponLightActive"/>
			</effect_group>
		</buff>
		
		<!-- *** weapon laser sight -->
		<buff name="buffLaserLightActivate" hidden="true">
			<stack_type value="effect"/>
			<duration value=".1"/>
			<effect_group>
				<requirement name="CVarCompare" cvar="batteryLaserLight" operation="GT" value="0"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffLaserLightActive"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="batteryLaserLight" operation="LTE" value="0"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffLaserLightReload"/>
			</effect_group>
		</buff>
		
		<buff name="buffLaserLightDeactivate" hidden="true">
			<stack_type value="effect"/>
			<duration value=".1"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffLaserLightActive"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetTransformChildrenActive" active="false" parent_transform="Side" transform_path="gun_laser"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="false" parent_transform="gunlaser" transform_path="gunlaser"/>
			</effect_group>
		</buff>
		
		<buff name="buffLaserLightActive" name_key="buffLaserLightActive" description_key="buffLaserLightActiveDesc" icon="ui_game_symbol_electric_power" icon_color="204,0,0" showonhud="false">
			<!-- hidden="true" -->
			<stack_type value="effect"/>
			<duration value="0"/>
			<update_rate value="10"/>
			<display_value value="batteryLaserLight"/>
			<display_value_key value="Laser: {0:0}%"/>
			<effect_group>
				<!-- <triggered_effect trigger="onSelfBuffStart" action="AttachPrefabToHeldItem" prefab="@:Other/Items/Mods/Sides/side_attachment_laserPrefab.prefab" parent_transform="Attachments/Side" local_rotation="0,0,0"/> -->
				<!-- <triggered_effect trigger="onSelfBuffStart" action="SetTransformChildrenActive" active="true" parent_transform="Side" transform_path="gun_laser"/> -->
				<triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="true" parent_transform="#HeldItemRoot" transform_path="gunlaser"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="true" parent_transform="gunlaser" transform_path="gunlaser"/>
				<!-- 100 = 100%, duration = 30 min, ticks every 10 seconds = 180 ticks; 0.556 per tick to be subtracted -->
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$batteryLaserLightTick" operation="set" value="0.556"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$batteryLaserLightEfficiency" operation="set" value="1"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$batteryLaserLightTick" operation="multiply" value="@$batteryLaserLightEfficiency"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="batteryLaserLight" operation="subtract" value="@$batteryLaserLightTick"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffLaserLightReload">
					<requirement name="CVarCompare" cvar="batteryLaserLight" operation="LT" value="0"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffLaserLightReload">
					<requirement name="CVarCompare" cvar="batteryLaserLight" operation="LT" value="0"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfBuffRemove" action="SetTransformChildrenActive" active="false" parent_transform="Side" transform_path="gun_laser"/>
				<triggered_effect trigger="onSelfBuffRemove" action="SetTransformActive" active="false" parent_transform="gunlaser" transform_path="gunlaser"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="batteryLaserLightDisplay" operation="set" value="@batteryLaserLight"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="batteryLaserLightDisplay" operation="divide" value="100"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="laserlightequipped" operation="set" value="1"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="laserlightequipped" operation="set" value="0"/>
			</effect_group>
		</buff>
		
		<buff name="buffLaserLightReload" hidden="true">
			<stack_type value="ignore"/>
			<duration value=".1"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffLaserLightActive"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetTransformChildrenActive" active="false" parent_transform="Side" transform_path="gun_laser"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="false" parent_transform="gunlaser" transform_path="gunlaser"/>
				<triggered_effect trigger="onSelfBuffStart" action="CallGameEvent" event="removeLaserBattery" allow_client_call="true">
					<requirement name="PlayerItemCount" item_name="resourceNiCdBattery" operation="GT" value="0"/></triggered_effect>
			</effect_group>
		</buff>
		
		<buff name="buffLaserLightReloadSuccess" name_key="buffLaserLightReloadSuccess" icon="ui_game_symbol_electric_power" icon_color="0,255,0" icon_blink="true">
			<stack_type value="ignore"/>
			<duration value="2"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="batteryLaserLight" operation="set" value="100"/>
				<triggered_effect trigger="onSelfBuffRemove" action="AddBuff" buff="buffLaserLightActive"/>
			</effect_group>
		</buff>
		
		<!-- *** flashlight -->
		<buff name="buffFlashLightActivate" hidden="true">
			<stack_type value="effect"/>
			<duration value=".1"/>
			<effect_group>
				<requirement name="CVarCompare" cvar="batteryFlashLight" operation="GT" value="0"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffFlashLightActive"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="batteryFlashLight" operation="LTE" value="0"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffFlashLightReload"/>
			</effect_group>
		</buff>
		
		<buff name="buffFlashLightDeactivate" hidden="true">
			<stack_type value="effect"/>
			<duration value=".1"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffFlashLightActive"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="false" parent_transform="#HeldItemRoot" transform_path="lightSource"/>
			</effect_group>
		</buff>
		
		<buff name="buffFlashLightActive" name_key="buffFlashLightActive" description_key="buffFlashLightActiveDesc" icon="ui_game_symbol_electric_power" icon_color="192,192,192" showonhud="false">
			<!-- hidden="true" -->
			<stack_type value="effect"/>
			<duration value="0"/>
			<update_rate value="10"/>
			<display_value value="batteryFlashLight"/>
			<display_value_key value="Held: {0:0}%"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffHeldLight"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="true" parent_transform="#HeldItemRoot" transform_path="lightSource"/>
				<!-- 100 = 100%, duration = 30 min, ticks every 10 seconds = 180 ticks; 0.556 per tick to be subtracted -->
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$batteryFlashLightTick" operation="set" value="0.556"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$batteryFlashLightEfficiency" operation="set" value="1"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$batteryFlashLightTick" operation="multiply" value="@$batteryFlashLightEfficiency"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="batteryFlashLight" operation="subtract" value="@$batteryFlashLightTick"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffFlashLightReload">
					<requirement name="CVarCompare" cvar="batteryFlashLight" operation="LT" value="0"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffFlashLightReload">
					<requirement name="CVarCompare" cvar="batteryFlashLight" operation="LT" value="0"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfBuffRemove" action="SetTransformActive" active="false" parent_transform="#HeldItemRoot" transform_path="lightSource"/>
				<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffHeldLight"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="batteryFlashLightDisplay" operation="set" value="@batteryFlashLight"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="batteryFlashLightDisplay" operation="divide" value="100"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="flashlightequipped" operation="set" value="1"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="flashlightequipped" operation="set" value="0"/>
			</effect_group>
		</buff>
		
		<buff name="buffFlashLightReload" hidden="true">
			<stack_type value="ignore"/>
			<duration value=".1"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffFlashLightActive"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="false" parent_transform="#HeldItemRoot" transform_path="lightSource"/>
				<triggered_effect trigger="onSelfBuffStart" action="CallGameEvent" event="removeFlashLightBattery" allow_client_call="true">
					<requirement name="PlayerItemCount" item_name="resourceNiCdBattery" operation="GT" value="0"/></triggered_effect>
			</effect_group>
		</buff>
		
		<buff name="buffFlashLightReloadSuccess" name_key="buffFlashLightReloadSuccess" icon="ui_game_symbol_electric_power" icon_color="0,255,0" icon_blink="true">
			<stack_type value="ignore"/>
			<duration value="2"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="batteryFlashLight" operation="set" value="100"/>
				<triggered_effect trigger="onSelfBuffRemove" action="AddBuff" buff="buffFlashLightActive"/>
			</effect_group>
		</buff>
		
		<!-- *** NVG -->
		<buff name="buffNVGActivate" hidden="true">
			<stack_type value="effect"/>
			<duration value=".1"/>
			<effect_group>
				<requirement name="CVarCompare" cvar="batteryNVG" operation="GT" value="0"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffNVGActive"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="batteryNVG" operation="LTE" value="0"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffNVGReload"/>
			</effect_group>
		</buff>
		
		<buff name="buffNVGDeactivate" hidden="true">
			<stack_type value="effect"/>
			<duration value=".1"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="NightVision"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" effect_name="VibrantDeSat" intensity="0" fade="0"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetPartActive" part="HeadLightTPV" active="false"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetPartActive" part="HeadLightFPV" active="false"/>
			</effect_group>
		</buff>
		
		<buff name="buffNVGActive" name_key="buffNVGActive" description_key="buffNVGActiveDesc" icon="ui_game_symbol_electric_power" icon_color="255,99,71" showonhud="false">
			<!-- hidden="true" -->
			<stack_type value="effect"/>
			<duration value="0"/>
			<update_rate value="10"/>
			<display_value value="batteryNVG"/>
			<display_value_key value="NVG: {0:0}%"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffNightVision"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" effect_name="VibrantDeSat" intensity="1" fade="0"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetPartActive" part="HeadLightTPV" active="@!.IsFPV"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetPartActive" part="HeadLightFPV" active="@.IsFPV"/>
				
				<triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="true" parent_transform="#HeldItemRoot" transform_path="lightSource"/>
				<!-- 100 = 100%, duration = 30 min, ticks every 10 seconds = 180 ticks; 0.556 per tick to be subtracted -->
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$batteryNVGTick" operation="set" value="0.556"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$batteryNVGEfficiency" operation="set" value="1"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$batteryNVGTick" operation="multiply" value="@$batteryNVGEfficiency"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="batteryNVG" operation="subtract" value="@$batteryNVGTick"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffNVGReload">
					<requirement name="CVarCompare" cvar="batteryNVG" operation="LT" value="0"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffNVGReload">
					<requirement name="CVarCompare" cvar="batteryNVG" operation="LT" value="0"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" effect_name="VibrantDeSat" intensity="0" fade="0"/>
				<triggered_effect trigger="onSelfBuffRemove" action="SetPartActive" part="HeadLightTPV" active="false"/>
				<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffNightVision"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="batteryNVGDisplay" operation="set" value="@batteryNVG"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="batteryNVGDisplay" operation="divide" value="100"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="nvgequipped" operation="set" value="1"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="nvgequipped" operation="set" value="0"/>
			</effect_group>
		</buff>
		
		<buff name="buffNVGReload" hidden="true">
			<stack_type value="ignore"/>
			<duration value=".1"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffNVGActive"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" effect_name="VibrantDeSat" intensity="0" fade="0"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetPartActive" part="HeadLightTPV" active="false"/>
				<triggered_effect trigger="onSelfBuffStart" action="SetPartActive" part="HeadLightFPV" active="false"/>
				<triggered_effect trigger="onSelfBuffStart" action="CallGameEvent" event="removeNVGBattery" allow_client_call="true">
					<requirement name="PlayerItemCount" item_name="resourceNiCdBattery" operation="GT" value="0"/></triggered_effect>
			</effect_group>
		</buff>
		
		<buff name="buffNVGReloadSuccess" name_key="buffNVGReloadSuccess" icon="ui_game_symbol_electric_power" icon_color="0,255,0" icon_blink="true">
			<stack_type value="ignore"/>
			<duration value="2"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="batteryNVG" operation="set" value="100"/>
				<triggered_effect trigger="onSelfBuffRemove" action="AddBuff" buff="buffNVGActive"/>
			</effect_group>
		</buff>
		
		<!-- *** melee torch -->
		<buff name="buffHandTorchActivate" hidden="true">
			<stack_type value="effect"/>
			<duration value=".1"/>
			<effect_group>
				<requirement name="CVarCompare" cvar="batteryHandTorch" operation="GT" value="0"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffHandTorchActive"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffHeldTorch"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="batteryHandTorch" operation="LTE" value="0"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffHandTorchReload"/>
			</effect_group>
		</buff>
		
		<buff name="buffHandTorchDeactivate" hidden="true">
			<stack_type value="effect"/>
			<duration value=".1"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffHeldTorch"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffHandTorchActive"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveParticleEffectFromEntity" particle="torch02_firePrefab" parent_transform="TorchLight"/>
			</effect_group>
		</buff>
		
		<buff name="buffHandTorchActive" name_key="buffHandTorchActive" description_key="buffHandTorchActiveDesc" icon="ui_game_symbol_fire" icon_color="255,69,0" showonhud="false">
			<!-- hidden="true" -->
			<stack_type value="effect"/>
			<duration value="0"/>
			<update_rate value="10"/>
			<display_value value="batteryHandTorch"/>
			<display_value_key value="Torch: {0:0}%"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="AttachParticleEffectToEntity" particle="torch02_firePrefab" parent_transform="TorchLight"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffHeldTorch"/>
				
				<!-- 100 = 100%, duration = 60 min, ticks every 10 seconds = 360 ticks; 0.278 per tick to be subtracted -->
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$batteryHandTorchTick" operation="set" value="0.278"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$batteryHandTorchEfficiency" operation="set" value="1"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$batteryHandTorchTick" operation="multiply" value="@$batteryHandTorchEfficiency"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="batteryHandTorch" operation="subtract" value="@$batteryHandTorchTick"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffHandTorchReload">
					<requirement name="CVarCompare" cvar="batteryHandTorch" operation="LT" value="0"/>
				</triggered_effect>
				
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffHandTorchReload">
					<requirement name="CVarCompare" cvar="batteryHandTorch" operation="LT" value="0"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfBuffRemove" action="RemoveParticleEffectFromEntity" particle="torch02_firePrefab" parent_transform="TorchLight"/>
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="batteryHandTorchDisplay" operation="set" value="@batteryHandTorch"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="batteryHandTorchDisplay" operation="divide" value="100"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="torchequipped" operation="set" value="1"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="torchequipped" operation="set" value="0"/>
			</effect_group>
		</buff>
		
		<buff name="buffHandTorchReload" hidden="true">
			<stack_type value="ignore"/>
			<duration value=".1"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffHeldTorch"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffHandTorchActive"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveParticleEffectFromEntity" particle="torch02_firePrefab" parent_transform="TorchLight"/>
				<triggered_effect trigger="onSelfBuffStart" action="CallGameEvent" event="removeHandTorchBattery" allow_client_call="true">
					<requirement name="PlayerItemCount" item_name="ammoGasCan" operation="GTE" value="10"/></triggered_effect>
			</effect_group>
		</buff>
		
		<buff name="buffHandTorchReloadSuccess" name_key="buffHandTorchReloadSuccess" icon="ui_game_symbol_fire" icon_color="255,69,0" icon_blink="true">
			<stack_type value="ignore"/>
			<duration value="2"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="batteryHandTorch" operation="set" value="100"/>
				<triggered_effect trigger="onSelfBuffRemove" action="AddBuff" buff="buffHandTorchActive"/>
			</effect_group>
		</buff>
		
		<!-- *** burning shaft -->
		<buff name="buffBurningShaftActivate" hidden="true">
			<stack_type value="effect"/>
			<duration value=".1"/>
			<effect_group>
				<requirement name="CVarCompare" cvar="batteryBurningShaft" operation="GT" value="0"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffBurningShaftActive"/>
			</effect_group>
			<effect_group>
				<requirement name="CVarCompare" cvar="batteryBurningShaft" operation="LTE" value="0"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffBurningShaftReload"/>
			</effect_group>
		</buff>
		
		<buff name="buffBurningShaftDeactivate" hidden="true">
			<stack_type value="effect"/>
			<duration value=".1"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffBurningShaftActive"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemovePart" part="Flames"/>
			</effect_group>
		</buff>
		
		<buff name="buffBurningShaftActive" name_key="buffBurningShaftActive" description_key="buffBurningShaftActiveDesc" icon="ui_game_symbol_fire" icon_color="204,85,0" showonhud="false">
			<!-- hidden="true" -->
			<stack_type value="effect"/>
			<duration value="0"/>
			<update_rate value="10"/>
			<display_value value="batteryBurningShaft"/>
			<display_value_key value="Shaft: {0:0}%"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="AddPart" part="Flames" prefab="property?FlameEffect" parentTransform="#HeldItemRoot"/>
				<!-- <triggered_effect trigger="onSelfBuffStart" action="AttachPrefabToHeldItem" prefab="property?FlameEffect"/> -->
				
				<!-- 100 = 100%, duration = 30 min, ticks every 10 seconds = 180 ticks; 0.556 per tick to be subtracted -->
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$batteryBurningShaftTick" operation="set" value="0.556"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$batteryBurningShaftEfficiency" operation="set" value="1"/>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$batteryBurningShaftTick" operation="multiply" value="@$batteryBurningShaftEfficiency"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="batteryBurningShaft" operation="subtract" value="@$batteryBurningShaftTick"/>
				<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffBurningShaftReload">
					<requirement name="CVarCompare" cvar="batteryBurningShaft" operation="LT" value="0"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffBurningShaftReload">
					<requirement name="CVarCompare" cvar="batteryBurningShaft" operation="LT" value="0"/>
				</triggered_effect>
				<triggered_effect trigger="onSelfBuffRemove" action="RemovePart" part="Flames"/>
				<!-- <triggered_effect trigger="onSelfBuffRemove" action="RemovePrefabFromHeldItem" prefab="property?FlameEffect"/> -->
			</effect_group>
			
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="batteryBurningShaftDisplay" operation="set" value="@batteryBurningShaft"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="batteryBurningShaftDisplay" operation="divide" value="100"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="burningshaftequipped" operation="set" value="1"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="burningshaftequipped" operation="set" value="0"/>
			</effect_group>
		</buff>
		
		<buff name="buffBurningShaftReload" hidden="true">
			<stack_type value="ignore"/>
			<duration value=".1"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffBurningShaftActive"/>
				<triggered_effect trigger="onSelfBuffStart" action="RemovePart" part="Flames"/>
				<triggered_effect trigger="onSelfBuffStart" action="CallGameEvent" event="removeBurningShaftBattery" allow_client_call="true">
					<requirement name="PlayerItemCount" item_name="ammoGasCan" operation="GTE" value="10"/></triggered_effect>
			</effect_group>
		</buff>
		
		<buff name="buffBurningShaftReloadSuccess" name_key="buffBurningShaftReloadSuccess" icon="ui_game_symbol_fire" icon_color="204,85,0" icon_blink="true">
			<stack_type value="ignore"/>
			<duration value="2"/>
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="batteryBurningShaft" operation="set" value="100"/>
				<triggered_effect trigger="onSelfBuffRemove" action="AddBuff" buff="buffBurningShaftActive"/>
			</effect_group>
		</buff>
	
		<!-- *** food smell -->
		<buff name="buffAddHeatTrigger" hidden="true">
			<duration value="0"/>
			<effect_group compare_type="or">
				<!-- <requirement name="PlayerItemCount" item_name="foodRottingFlesh" operation="GTE" value="1"/> -->
				<!-- <requirement name="PlayerItemCount" item_name="foodCornBread" operation="GTE" value="5"/> -->
				<!-- <requirement name="PlayerItemCount" item_name="foodShamSandwich" operation="GTE" value="5"/> -->
				<requirement name="PlayerItemCount" item_name="foodCharredMeat" operation="GTE" value="5"/>
				<requirement name="PlayerItemCount" item_name="foodGrilledMeat" operation="GTE" value="5"/>
				<requirement name="PlayerItemCount" item_name="foodBoiledMeat" operation="GTE" value="5"/>
				<requirement name="PlayerItemCount" item_name="foodMeatStew" operation="GTE" value="4"/>
				<requirement name="PlayerItemCount" item_name="foodSteakAndPotato" operation="GTE" value="4"/>
				<requirement name="PlayerItemCount" item_name="foodShamChowder" operation="GTE" value="3"/>
				<requirement name="PlayerItemCount" item_name="foodHoboStew" operation="GTE" value="3"/>
				<requirement name="PlayerItemCount" item_name="foodFishTacos" operation="GTE" value="3"/>
				<requirement name="PlayerItemCount" item_name="foodChiliDog" operation="GTE" value="3"/>
				<!-- <requirement name="PlayerItemCount" item_name="foodBakedPotato" operation="GTE" value="5"/> -->
				<requirement name="PlayerItemCount" item_name="foodBlueberryPie" operation="GTE" value="4"/>
				<requirement name="PlayerItemCount" item_name="foodPumpkinPie" operation="GTE" value="4"/>
				<requirement name="PlayerItemCount" item_name="foodPumpkinCheesecake" operation="GTE" value="4"/>
				<requirement name="PlayerItemCount" item_name="foodPumpkinBread" operation="GTE" value="4"/>
				<requirement name="PlayerItemCount" item_name="foodGumboStew" operation="GTE" value="2"/>
				<requirement name="PlayerItemCount" item_name="foodShepardsPie" operation="GTE" value="2"/>
				<requirement name="PlayerItemCount" item_name="foodSpaghetti" operation="GTE" value="2"/>
				<requirement name="PlayerItemCount" item_name="foodTunaFishGravyToast" operation="GTE" value="2"/>
				<!-- <requirement name="PlayerItemCount" item_name="foodEggBoiled" operation="GTE" value="5"/> -->
				<requirement name="PlayerItemCount" item_name="foodBaconAndEggs" operation="GTE" value="4"/>
				<requirement name="PlayerItemCount" item_name="foodVegetableStew" operation="GTE" value="3"/>
				<requirement name="PlayerItemCount" item_name="foodRawMeat" operation="GTE" value="10"/>
				<requirement name="PlayerItemCount" item_name="foodChickenStew" operation="GTE" value="3"/>
				<requirement name="PlayerItemCount" item_name="foodChickenMiso" operation="GTE" value="3"/>
				<requirement name="PlayerItemCount" item_name="foodScrambledEggs" operation="GTE" value="5"/>
				<requirement name="PlayerItemCount" item_name="foodTrampStew" operation="GTE" value="5"/>
				<requirement name="PlayerItemCount" item_name="foodVagabondStew" operation="GTE" value="5"/>
				<!-- <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffSmell"/> -->
				<triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="fresh_meat" allow_client_call="true"/>
			</effect_group>
		</buff>
		
		<buff name="buffSmell" name_key="buffSmellName" description_key="buffSmellDesc" tooltip_key="buffSmellTooltip" remove_on_death="true" icon="ui_game_symbol_smell" icon_color="192,192,192">
			<duration value="15"/>
			<stack_type value="effect"/>
			<display_value value="smell"/>
			<display_value_format value="time"/>
			<display_value_key value="{0:0}"/>
			<update_rate value="1"/>
			
			<!-- <effect_group> -->
			<!-- <triggered_effect trigger="onSelfBuffStart" action="AddJournalEntry" journal="buffSmellJournalTip"/> -->
			<!-- </effect_group> -->
			<effect_group>
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="smell" operation="set" value="15"/>
				<!-- <triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="crawler_roam" play_in_head="true"/> -->
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="smell" operation="add" value="-1"/>
				<!-- <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="fresh_meat" allow_client_call="true"/> -->
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="smell" operation="set" value="15"/>
				<requirement name="CVarCompare" cvar="smell" operation="LTE" value="0"/>
			</effect_group>
			<effect_group>
				<triggered_effect trigger="onSelfBuffFinish" action="ModifyCVar" cvar="smell" operation="set" value="15"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="smell" operation="set" value="15"/>
			</effect_group>
		</buff>
		
		
	</append>
</HellsJanitor>